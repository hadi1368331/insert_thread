(function(e){function t(t){for(var r,n,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],r=!0,n=1;n<i.length;n++){var o=i[n];0!==s[o]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=i[0]))}return e}var r={},n={3:0},s={3:0},a=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{1:"03055778",2:"9f3a5d2d",4:"60e2ec90"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(e){var t=[],i={4:1};n[e]?t.push(n[e]):0!==n[e]&&i[e]&&t.push(n[e]=new Promise((function(t,i){for(var r="css/"+({}[e]||e)+"."+{1:"31d6cfe0",2:"31d6cfe0",4:"10708cab"}[e]+".css",s=c.p+r,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var l=a[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===r||u===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete n[e],p.parentNode.removeChild(p),i(a)},p.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){n[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,i){r=s[e]=[t,i]}));t.push(r[2]=a);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var i=s[e];if(0!==i){if(i){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,i[1](d)}s[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(i,r,function(t){return e[t]}.bind(null,r));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;a.push([0,0]),i()})({0:function(e,t,i){e.exports=i("2f39")},"0647":function(e,t,i){"use strict";i.d(t,"C",(function(){return n})),i.d(t,"j",(function(){return s})),i.d(t,"i",(function(){return a})),i.d(t,"x",(function(){return o})),i.d(t,"m",(function(){return c})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return p})),i.d(t,"t",(function(){return h})),i.d(t,"q",(function(){return v})),i.d(t,"n",(function(){return m})),i.d(t,"a",(function(){return f})),i.d(t,"s",(function(){return b})),i.d(t,"u",(function(){return g})),i.d(t,"r",(function(){return y})),i.d(t,"A",(function(){return w})),i.d(t,"D",(function(){return E})),i.d(t,"z",(function(){return S})),i.d(t,"f",(function(){return I})),i.d(t,"g",(function(){return N})),i.d(t,"l",(function(){return _})),i.d(t,"k",(function(){return A})),i.d(t,"w",(function(){return C})),i.d(t,"y",(function(){return V})),i.d(t,"p",(function(){return k})),i.d(t,"v",(function(){return T})),i.d(t,"B",(function(){return O})),i.d(t,"h",(function(){return R})),i.d(t,"o",(function(){return M}));var r=i("515a");const n=new r["a"](r["b"].error,"variable-name-not-unique","Variable name is not unique."),s=new r["a"](r["b"].error,"iid-not-unique","Instance ID is not unique."),a=new r["a"](r["b"].error,"iid-not-integer","Instance ID is not a positive integer."),o=new r["a"](r["b"].error,"not-c-variable-name","Not a proper C variable name."),c=new r["a"](r["b"].warning,"incorrect-uuid-format","Incorrect UUID format."),l=new r["a"](r["b"].info,"callback-name-not-unique","Callback name is not unique. This is acceptable in case of common handlers, otherwise a unique name is required."),u=new r["a"](r["b"].error,"context-callback-name-not-unique","Context callback name is not unique."),d=new r["a"](r["b"].error,"callback-not-c-function-name","Not a proper C function name."),p=new r["a"](r["b"].error,"context-callback-not-c-function-name","Not a proper C function name."),h=new r["a"](r["b"].error,"missing-value","Missing value."),v=new r["a"](r["b"].error,"minimum-value-is-larger-than-maximum","Minimum Value is larger than Maximum Value."),m=new r["a"](r["b"].error,"max-length-not-positive-integer","Maximum Length is not zero or a positive integer."),f=new r["a"](r["b"].error,"aid-not-integer","Accessory ID is not a positive integer."),b=new r["a"](r["b"].warning,"missing-readable-callback","Missing readable callback."),g=new r["a"](r["b"].warning,"missing-writable-callback","Missing writable callback."),y=new r["a"](r["b"].warning,"missing-context-callback","Missing handle read context data callback."),w=new r["a"](r["b"].warning,"readable-property-should-be-set","Readable property should be set."),E=new r["a"](r["b"].warning,"writable-property-should-be-set","Writable property should be set."),S=new r["a"](r["b"].warning,"readable-supportsEventNotification-bleSupportsBroadcastNotification-property-should-be-set","Readable, Supports Event Notification and Ble Supports Broadcast Notification properties should be set."),I=new r["a"](r["b"].error,"supportsEventNotificationContextInformation-property-is-only-available-for-uint8-format","Supports Event Notification Context Information property is only available for uint8 format."),N=new r["a"](r["b"].error,"context-information-callbacks-need-the-supportsEventNotificationContextInformation-property","Context information callbacks need the Supports Event Notification Context Information property"),_=new r["a"](r["b"].error,"incorrect-hardware-version","Incorrect Hardware Version format"),A=new r["a"](r["b"].error,"incorrect-firmware-version","Incorrect Firmware Version format"),D='contains invalid characters: " or \\',C=new r["a"](r["b"].error,"name-invalid-c-string",`Name ${D}`),V=new r["a"](r["b"].error,"product-data-invalid-c-string",`Product Data ${D}`),k=new r["a"](r["b"].error,"manufacturer-invalid-c-string",`Manufacturer ${D}`),T=new r["a"](r["b"].error,"model-invalid-c-string",`Model ${D}`),O=new r["a"](r["b"].error,"serial-number-invalid-c-string",`Serial Number ${D}`),R=new r["a"](r["b"].error,"debug-description-invalid-c-string",`Debug Description ${D}`),M=new r["a"](r["b"].error,"manufacturer-description-invalid-c-string",`Manufacturer Description ${D}`)},2757:function(e,t,i){"use strict";let r;i.d(t,"a",(function(){return r})),function(e){e["accessory"]="accessory",e["service"]="service",e["characteristic"]="characteristic"}(r||(r={})),t["b"]=r},"2f39":function(e,t,i){"use strict";i.r(t);i("7d6e"),i("e54f"),i("9f29"),i("985d"),i("31cd");var r=i("2b0e"),n=i("1f91"),s=i("42d2"),a=i("b05d"),o=i("2a19");r["default"].use(a["a"],{config:{dark:"auto"},lang:n["a"],iconSet:s["a"],plugins:{Notify:o["a"]}});var c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"q-app"}},[i("router-view")],1)},l=[],u={name:"App"},d=u,p=i("2877"),h=Object(p["a"])(d,c,l,!1,null,null,null),v=h.exports,m=i("2f62"),f=i("dbdd"),b=i("eca4"),g=i("853f"),y=i("a883"),w=i("9c30"),E=i("4f54"),S=i("2757"),I=i("1732");const N="temp-contribution-id-",_={adkLayoutOn:!1,dialogOn:!1,dirty:!1,accessory:{},contributions:[],selectedItem:null},A={adkLayoutOn(e){return e.adkLayoutOn},dialogOn(e){return e.dialogOn},dirty(e){return e.dirty},accessory(e){return e.accessory},contributedServices(e){var t=[];if(Array.isArray(e.contributions)){var i=e.contributions.map((e=>new w["e"](e.content,e.filename)));i.forEach((e=>{e.accessories.forEach((e=>{e.services.forEach((e=>{if(e.contributionId){let i=t.find((t=>t.contributionId===e.contributionId));i?e.characteristics.forEach((e=>{i.characteristics.push(e),e.parent=i})):t.push(e)}else t.push(e)}))}))})),t.forEach((t=>{t.parent=e.accessory}))}return t},selectedItem(e){return e.selectedItem},itemByVueId:(e,t)=>i=>{if(e.accessory.vueId==i)return e.accessory;for(let e of t.mergedAccessory.services){if(e.vueId==i)return e;for(let t of e.characteristics)if(t.vueId==i)return t}},mergedAccessory(e,t){var i=new w["a"]({...e.accessory,services:[]});return i.services=[...e.accessory.services,...t.contributedServices],i},serviceIids(e,t){return[...e.accessory.services,...t.contributedServices].map((e=>e.iid)).filter((e=>!!e))},configurationToSave(e,t,i,r){const n=r["VersionManager/configVersion"].toString();let s=new w["e"]({version:n,accessories:[e.accessory]});return JSON.stringify(s,null,2)}},D={setAdkLayoutOn({commit:e},t){e("SET_ADK_LAYOUT_ON",t)},setDialogOn({commit:e},t){e("SET_DIALOG_ON",t)},setDirty({commit:e,state:t},i){t.dirty!=i&&(y["a"].setDirty(i),e("SET_DIRTY",i))},setAccessory({commit:e},t){e("SET_ACCESSORY",t)},setSelectedItem({commit:e},t){e("SET_SELECTED_ITEM",t)},setValue({commit:e,dispatch:t},i){e("SET_VALUE",i),t("setDirty",!0)},removeKey({commit:e,dispatch:t},i){e("REMOVE_KEY",i),t("setDirty",!0)},setValueNoDirty({commit:e},t){e("SET_VALUE",t)},setChildren({commit:e,dispatch:t},i){e("SET_CHILDREN",i),t("setDirty",!0)},removeSelectedItem({commit:e,dispatch:t}){e("REMOVE_SELECTED_ITEM"),t("setDirty",!0),t("maintainLinkedServices")},duplicateSelectedItem({getters:e,dispatch:t}){t("duplicateItem",e.selectedItem),t("setDirty",!0)},duplicateItem({commit:e,dispatch:t},i){e("DUPLICATE_ITEM",i),t("setDirty",!0)},moveUpSelectedItem({commit:e,dispatch:t}){e("MOVE_UP_SELECTED_ITEM"),t("setDirty",!0)},moveDownSelectedItem({commit:e,dispatch:t}){e("MOVE_DOWN_SELECTED_ITEM"),t("setDirty",!0)},addHomekitItem({commit:e,dispatch:t},i){e("ADD_HOMEKIT_ITEM",i),t("setDirty",!0)},setContributions({commit:e},t){for(let n of t){var i,r;let e=null===(i=n.content)||void 0===i||null===(r=i.accessories[0])||void 0===r?void 0:r.services;if(e&&Array.isArray(e))for(let t of e)t.contributionId||(t.contributionId=N+Object(I["a"])())}e("SET_CONTRIBUTIONS",t)},addArrayItem({commit:e,dispatch:t},i){e("ADD_ARRAY_ITEM",i),t("setDirty",!0)},removeArrayItem({commit:e,dispatch:t},i){e("REMOVE_ARRAY_ITEM",i),t("setDirty",!0)},maintainLinkedServices({commit:e,getters:t},i){e("MAINTAIN_LINKED_SERVICES",{serviceIids:t.serviceIids,...i})},setValidationMessages({commit:e},t){e("SET_VALIDATION_MESSAGES",t)},makeContributionEditable({state:e,dispatch:t},i){if(i.homekitType!==S["b"].service)return;t("duplicateItem",i);let r=JSON.parse(JSON.stringify(e.contributions)),n=r.filter((e=>{var t,r,n;return(null===(t=e.content)||void 0===t||null===(r=t.accessories[0])||void 0===r||null===(n=r.services)||void 0===n?void 0:n.filter((e=>!!i.contributionId&&e.contributionId===i.contributionId)).length)>0})),s=n.map((e=>(e.content.accessories[0].services&&(e.content.accessories[0].services=e.content.accessories[0].services.filter((e=>!i.contributionId||e.contributionId!=i.contributionId))),e)));for(let l of s){var a,o;let e=null===(a=l.content)||void 0===a||null===(o=a.accessories[0])||void 0===o?void 0:o.services;for(let t of e)"string"===typeof t.contributionId&&t.contributionId.startsWith(N)&&delete t.contributionId}let c=s.map((e=>({filename:e.filename,content:JSON.stringify(e.content,null,2)})));y["a"].saveContributions(c),y["a"].onSaveEvent()}},C={SET_ADK_LAYOUT_ON(e,t){e.adkLayoutOn=t},SET_DIALOG_ON(e,t){e.dialogOn=t},SET_DIRTY(e,t){e.dirty=t},SET_ACCESSORY(e,t){e.accessory=t},SET_SELECTED_ITEM(e,t){e.selectedItem=t},SET_VALUE(e,{object:t,key:i,value:r}){t[i]=r},REMOVE_KEY(e,{object:t,key:i}){r["default"].delete(t,i)},SET_CHILDREN(e,{object:t,children:i}){t.children=i},REMOVE_SELECTED_ITEM(e){if(!e.selectedItem["parent"])return;let t=e.selectedItem.parent,i=t.children,r=i.indexOf(e.selectedItem),n=i.length-1;e.selectedItem=0==n?t:r<n?i[r+1]:i[r-1],i.splice(r,1)},DUPLICATE_ITEM(e,t){let i=t.parent,r=i.children;switch(t.homekitType){case S["b"].service:r.push(new w["f"]({...t,contributionId:void 0},i));break;case S["b"].characteristic:r.push(new w["b"]({...t,contributionId:void 0},i));break;default:break}},MOVE_UP_SELECTED_ITEM(e){let t=e.selectedItem,i=t.parent.children,r=i.indexOf(t);r>0&&(i.splice(r,1),i.splice(r-1,0,t))},MOVE_DOWN_SELECTED_ITEM(e){let t=e.selectedItem,i=t.parent.children,r=i.indexOf(t);r+1<i.length&&(i.splice(r,1),i.splice(r+1,0,t))},ADD_HOMEKIT_ITEM(e,{homekitType:t,homekitItem:i}){if(null==t)return void g["default"].error("Homekit type is null");if(null==i)return void g["default"].error("ADK Homekit item is null");let r=e.accessory,n=e.selectedItem;switch(t){case S["b"].accessory:for(let e of i.services)r.services.push(E["a"].createService(e,r));break;case S["b"].service:r.services.push(E["a"].createService(i,r));break;case S["b"].characteristic:if(null!=n.sourceFile)break;switch(n.homekitType){case S["b"].accessory:0==r.services.length&&E["a"].createService({},r),r.services[0].characteristics.push(E["a"].createCharacteristic(i,r.services[0]));break;case S["b"].service:n.characteristics.push(E["a"].createCharacteristic(i,n));break;case S["b"].characteristic:n.parent.characteristics.push(E["a"].createCharacteristic(i,n.parent));break}break}},SET_CONTRIBUTIONS(e,t){Array.isArray(t)&&(e.contributions=t)},ADD_ARRAY_ITEM(e,{array_object:t,item:i}){t.push(i)},REMOVE_ARRAY_ITEM(e,{array_object:t,index:i}){t.splice(i,1)},MAINTAIN_LINKED_SERVICES(e,{serviceIids:t,oldVal:i=null,newVal:r=null}){for(const n of e.accessory.services){if(i&&r){const e=n.linkedServices.indexOf(i);-1!==e&&(n.linkedServices[e]=r)}n.linkedServices=n.linkedServices.filter((e=>t.includes(e)))}},SET_VALIDATION_MESSAGES(e,{object:t,value:i}){t.validationMessages=i}};var V={namespaced:!0,state:_,getters:A,actions:D,mutations:C},k=i("5ee1"),T=i("0647");function O(e,t,i){if(e)t.validationMessages.includes(i)||Q.dispatch("App/setValidationMessages",{object:t,value:[...t.validationMessages,i]},{root:!0});else if(t.validationMessages.includes(i)){let e=t.validationMessages.filter((e=>e!=i))||[];Q.dispatch("App/setValidationMessages",{object:t,value:e},{root:!0})}}const R={mergedAccessory(e,t,i,r){return r["App/mergedAccessory"]},accessory(e,t,i,r){return r["App/accessory"]},instanceIds(e,t){const i=t.mergedAccessory;let r=[];return i.accept({visit(e){"iid"in e&&r.push(e.iid)}}),r},nextFreeIid(e,t){return t.instanceIds.length>0?Math.max(...t.instanceIds)+1:2},variableNames(e,t){const i=t.mergedAccessory;let r=[];return i.accept({visit(e){r.push(e.variableName)}}),r},characteristicCallbackFunctionNames(e,t){return e=>{const i=t.mergedAccessory;let r=[];return i.accept({visit(t){t.homekitType==S["a"].characteristic&&null!==t&&void 0!==t&&t[e]&&Object.entries(null===t||void 0===t?void 0:t[e]).forEach((([,e])=>{e&&r.push(e)}))}}),r}},accessoryIdValidation(e,t){const i=t.accessory;O(!Number.isInteger(i.aid),i,T["a"])},variableNameValidation(e,t){const i=t.mergedAccessory;i.accept({visit(e){O(t.variableNames.filter((t=>e.variableName==t)).length>1,e,T["C"]),O(!Object(k["c"])(e.variableName),e,T["x"])}})},cStringsValidation(e,t){function i(e,t){t.forEach((([t,i])=>{if(t in e){const r=Object(k["b"])(e[t]);O(!r,e,i)}}))}const r=t.accessory;i(r,[["name",T["w"]],["productData",T["y"]],["manufacturer",T["p"]],["model",T["v"]],["serialNumber",T["B"]]]);const n=t.mergedAccessory;n.accept({visit(e){e.homekitType===S["a"].service&&i(e,[["name",T["w"]],["debugDescription",T["h"]]]),e.homekitType===S["a"].characteristic&&i(e,[["debugDescription",T["h"]],["manufacturerDescription",T["o"]]])}})},instanceIdUniquenessValidation(e,t){const i=t.mergedAccessory;i.accept({visit(e){if(e.homekitType!=S["a"].accessory){O(t.instanceIds.filter((t=>e.iid==t)).length>1,e,T["j"]);const i=Number.isInteger(e.iid),r=e.iid>0;O(!i||!r,e,T["i"])}}})},uuidLengthValidation(e,t){const i=t.mergedAccessory;i.accept({visit(e){if(e.homekitType!=S["a"].accessory){const t=/^[a-fA-F0-9]{8}-([a-fA-F0-9]{4}-){3}[a-fA-F0-9]{12}$/,i=t.test(null===e||void 0===e?void 0:e.type);O(!i,e,T["m"])}}})},callbackNameValidation(e,t){function i(e,t){return Object.entries(e).reduce(((e,[,i])=>!!e||!(!i&&null!==i||!(t.filter((e=>e==i)).length>1))),!1)}function r(e){return Object.entries(e).reduce(((e,[,t])=>!!e||!(!t&&null!==t||Object(k["c"])(t))),!1)}const n=t.mergedAccessory;n.accept({visit(e){if(e.homekitType==S["a"].characteristic&&null!==e&&void 0!==e&&e.callbacks){if(null!==e&&void 0!==e&&e.callbacks){const n=i(e.callbacks,t.characteristicCallbackFunctionNames("callbacks"));O(n,e,T["b"]);const s=r(e.callbacks);O(s,e,T["c"])}if(null!==e&&void 0!==e&&e.contextCallbacks){const n=i(e.contextCallbacks,t.characteristicCallbackFunctionNames("contextCallbacks"));O(n,e,T["d"]);const s=r(e.contextCallbacks);O(s,e,T["e"])}}}})},constraintsContainRequiredValuesValidation(e,t){const i=t.mergedAccessory;for(let r of i.services.map((e=>e.characteristics)).flat())if(r.constraints){const e=Object.values(r.constraints).some((e=>null===e||""===e));O(e,r,T["t"])}else O(!1,r,T["t"])},constraintValuesValidation(e,t){const i=t.mergedAccessory;for(let a of i.services.map((e=>e.characteristics)).flat()){var r,n,s;const e=null===a||void 0===a||null===(r=a.constraints)||void 0===r?void 0:r.minimumValue,t=null===a||void 0===a||null===(n=a.constraints)||void 0===n?void 0:n.maximumValue;if(void 0!==e&&void 0!==t){const i=e>t;O(i,a,T["q"])}if(void 0!==(null===(s=a.constraints)||void 0===s?void 0:s.maxLength)&&"maxLength"in a.constraints){const e=a.constraints.maxLength,t=Number.isInteger(e),i=e>=0;O(!t||!i,a,T["n"])}else O(!1,a,T["n"])}},callbacksRequiredCallbacksValidation(e,t){const i=t.mergedAccessory;i.accept({visit(e){var t,i,r;e.homekitType==S["a"].characteristic&&(O((e.properties.includes("writable")||e.properties.includes("ble.writableWithoutSecurity"))&&void 0===(null===(t=e.callbacks)||void 0===t?void 0:t.handleWrite),e,T["u"]),O((e.properties.includes("ble.supportsBroadcastNotification")||e.properties.includes("ble.readableWithoutSecurity")||e.properties.includes("readable")||e.properties.includes("ip.supportsWriteResponse")||e.properties.includes("supportsEventNotification"))&&void 0===(null===(i=e.callbacks)||void 0===i?void 0:i.handleRead),e,T["s"]),O(e.properties.includes("supportsEventNotificationContextInformation")&&void 0===(null===(r=e.contextCallbacks)||void 0===r?void 0:r.handleReadContextData),e,T["r"]))}})},propertiesRequiredEnabledPropertyValidation(e,t){const i=t.mergedAccessory;i.accept({visit(e){e.homekitType==S["a"].characteristic&&(O(e.properties.includes("readRequiresAdminPermissions")&&!e.properties.includes("readable"),e,T["A"]),O((e.properties.includes("supportsAuthorizationData")||e.properties.includes("requiresTimedWrite")||e.properties.includes("writeRequiresAdminPermissions")||e.properties.includes("ip.supportsWriteResponse"))&&!e.properties.includes("writable"),e,T["D"]),O(e.properties.includes("ble.supportsDisconnectedNotification")&&!(e.properties.includes("readable")&&e.properties.includes("supportsEventNotification")&&e.properties.includes("ble.supportsBroadcastNotification")),e,T["z"]))}})},contextCallbacksAvailabilityValidation(e,t){const i=t.mergedAccessory;i.accept({visit(e){if(e.homekitType==S["a"].characteristic){const t=e.properties.includes("supportsEventNotificationContextInformation"),i=e.format!==w["c"].uint8;O(t&&i,e,T["f"]);const r=e.contextCallbacks&&Object.values(e.contextCallbacks).some((e=>void 0!==e));O(r&&!t,e,T["g"])}}})},firmwareHardwareVersionValidation(e,t){const i=t.accessory;[{value:i.firmwareVersion,message:T["k"]},{value:i.hardwareVersion,message:T["l"]}].forEach((({value:e,message:t})=>{const r=!e,n=e.length>64,s=e.match(/^[0-9]+(.[0-9]+(.[0-9]+)?)?$/g),a=4294967295,o=e.split(".").map((e=>+e)).some((e=>e>a));O(r||n||!s||o,i,t)}))},allValidation(e,t){return[t.accessoryIdValidation,t.variableNameValidation,t.cStringsValidation,t.instanceIdUniquenessValidation,t.uuidLengthValidation,t.callbackNameValidation,t.constraintsContainRequiredValuesValidation,t.constraintValuesValidation,t.callbacksRequiredCallbacksValidation,t.propertiesRequiredEnabledPropertyValidation,t.contextCallbacksAvailabilityValidation,t.firmwareHardwareVersionValidation]}},M={},x={},L={};var q={namespaced:!0,state:M,getters:R,actions:x,mutations:L};function P(e){null!==e&&void 0!==e&&e.code&&(this.name="HomeKit Code Generator's log",this.code=null===e||void 0===e?void 0:e.code,this.type=null===e||void 0===e?void 0:e.type,this.message=null===e||void 0===e?void 0:e.message,this.description=null===e||void 0===e?void 0:e.description,this.traceback=Array.isArray(e.traceback)?e.traceback.join("\n"):"string"===typeof e.traceback?e.traceback:void 0)}const U={filename:void 0,result:void 0},j={filename(e){return e.filename},result(e){return e.result},generationFailed(e){var t;return!(null===(t=e.result)||void 0===t||!t.code)&&0!=e.result.code},generationResult(e){return e.result}},W={setGenerationResult({commit:e},t){const i=new P(null===t||void 0===t?void 0:t.result);e("SET_RESULT",i),e("SET_FILE_NAME",null===t||void 0===t?void 0:t.filename)}},$={SET_FILE_NAME(e,t){e.filename=t},SET_RESULT(e,t){e.result=t}};var F={namespaced:!0,state:U,getters:j,actions:W,mutations:$};class K{constructor(e){const t=/[0-9]+\.[0-9]+\.[0-9]+/;if(!e.match(t))throw new Error(`Invalid version string ${e}`);this._version=e}get subversions(){return this._version.split(".").map((e=>+e))}toString(){return this._version}isNewerThan(e){const t=this.subversions,i=e.subversions;for(let r=0;r<3;r++){if(t[r]>i[r])return!0;if(t[r]<i[r])return!1}return!1}isEqual(e){return this._version===e.toString()}}const B={readable:"Readable",writable:"Writable",supportsEventNotification:"Supports Event Notification",supportsEventNotificationContextInformation:"Supports Event Notification Context Information",hidden:"Hidden",requiresAdminPermissions:"Requires Admin Permissions",readRequiresAdminPermissions:"Read Requires Admin Permissions",writeRequiresAdminPermissions:"Write Requires Admin Permissions",requiresTimedWrite:"Requires Timed Write",supportsAuthorizationData:"Supports Authorization Data","ip.controlPoint":"IP Control Point","ip.supportsWriteResponse":"IP Supports Write Response","ble.supportsBroadcastNotification":"Ble Supports Broadcast Notification","ble.supportsDisconnectedNotification":"Ble Supports Disconnected Notification","ble.readableWithoutSecurity":"Ble Readable Without Security","ble.writableWithoutSecurity":"Ble Writable Without Security"};function G(e){for(const[t,i]of Y.entries()){const r=i.version;if(r.isEqual(e))return i.data;if(r.isNewerThan(e)){if(0!==t)return Y[t-1].data;throw new Error(`Received an impossible version: ${e} (<1.0.0)`)}}throw new Error(`Unable to find property list for version ${e}`)}function H(e){return B[e]}function J(e){const t={};return G(e).forEach((e=>t[e]=H(e))),t}const Y=[{version:new K("1.0.0"),data:["readable","writable","supportsEventNotification","hidden","requiresAdminPermissions","readRequiresAdminPermissions","writeRequiresAdminPermissions","requiresTimedWrite","supportsAuthorizationData","ip.controlPoint","ip.supportsWriteResponse","ble.supportsBroadcastNotification","ble.supportsDisconnectedNotification","ble.readableWithoutSecurity","ble.writableWithoutSecurity"]},{version:new K("1.1.0"),data:["readable","writable","supportsEventNotification","supportsEventNotificationContextInformation","hidden","readRequiresAdminPermissions","writeRequiresAdminPermissions","requiresTimedWrite","supportsAuthorizationData","ip.controlPoint","ip.supportsWriteResponse","ble.supportsBroadcastNotification","ble.supportsDisconnectedNotification","ble.readableWithoutSecurity","ble.writableWithoutSecurity"]}];var z={namespaced:!0,state:{upgradeResults:[],configVersion:void 0,showOlderVersionDialog:!1,olderVersionDialogText:""},getters:{upgradeResults(e){return e.upgradeResults},configVersion(e){return e.configVersion},characteristicPropertyIds(e,t){return G(t.configVersion)},characteristicPropertyLabels(e,t){return J(t.configVersion)},showOlderVersionDialog(e){return e.showOlderVersionDialog},olderVersionDialogText(e){return e.olderVersionDialogText}},actions:{displayUpgradeNotices({commit:e},t){t.length>0&&(e("SET_NOTICES",t),e("UpgradeRule/SET_UPGRADE_DIALOG_ON",!0,{root:!0}))},setVersion({commit:e},t){e("SET_VERSION",t)},setOlderVersionDialog({commit:e,dispatch:t},{show:i,text:r=""}){e("SET_OLDER_VERSION_DIALOG",i),t("App/setDialogOn",i,{root:!0}),e("SET_OLDER_VERSION_DIALOG_TEXT",r)}},mutations:{SET_NOTICES(e,t){e.upgradeResults=t},SET_VERSION(e,t){e.configVersion=new K(t)},SET_OLDER_VERSION_DIALOG(e,t){e.showOlderVersionDialog=t},SET_OLDER_VERSION_DIALOG_TEXT(e,t){e.olderVersionDialogText=t}}};r["default"].use(m["default"]);const X=new m["default"].Store({modules:{Markdown:f["WaspMarkdownStore"],App:V,Validation:q,GenerationResult:F,VersionManager:z,UpgradeRule:b["UpgradeRule"]},actions:{init:()=>{}},strict:!1});var Q=X,Z=i("8c4f");const ee=[{path:"/",component:()=>Promise.all([i.e(0),i.e(4)]).then(i.bind(null,"9ccc"))}];var te=ee;r["default"].use(Z["a"]);var ie=function(){const e=new Z["a"]({scrollBehavior:()=>({x:0,y:0}),routes:te,mode:"hash",base:""});return e},re=async function(){const e="function"===typeof Q?await Q({Vue:r["default"]}):Q,t="function"===typeof ie?await ie({Vue:r["default"],store:e}):ie;e.$router=t;const i={router:t,store:e,render:e=>e(v),el:"#q-app"};return{app:i,store:e,router:t}},ne=i("bc3a"),se=i.n(ne);r["default"].prototype.$axios=se.a;var ae=({app:e})=>{window.Cypress&&(window.app=e,g["default"].info("DEV or Cypress mode detected, app is available"))};g["default"].info("Logger is active"),g["default"].info("Platform: java");var oe=i("4bde"),ce=i("ff52");const le={"1.0.0":"1.0.0","1.0.1":"1.0.1","1.1.0":"1.1.0",latestConfigVersion:"1.1.0"};var ue=le;const de=i("853f").default;class pe{async upgrade(e,t,i){let r=new K(t.version);if(null===i)de.info(`No SDK found, config version stays ${r}`),e.dispatch("VersionManager/setOlderVersionDialog",{show:!0,text:`Unable to find SDK. Your configuration is loaded as-is, with version ${r}.`});else{de.info(`Received configuration is version ${r}`);const n=this.findCompatibleConfigVersion(i);if(de.info(`SDK version ${i} was translated to target config version ${n}`),n.isNewerThan(r)){const i=await this.collectUpgradeLadder(r,n);de.info(`Attempting upgrade with actions: ${r} --\x3e ${n}`);let s=[];i.forEach((e=>{const i=e.upgrade(t);s=s.concat(i)})),e.dispatch("App/setDirty",s.length>0),e.dispatch("VersionManager/displayUpgradeNotices",s)}else if(n.isEqual(r))de.info(`No upgrade needed: ${r} --\x3e ${n}`);else{const t=`Using a newer config with older SDK. Cannot downgrade: ${r} --\x3e ${n}`;de.warn(t);const i=`Loaded configuration is version ${r}, while the used SDK only supports up to ${n}. Compatibility issues may arise. Upgrading your SDK is recommended.`;e.dispatch("VersionManager/setOlderVersionDialog",{show:!0,text:i})}}}async collectUpgradeLadder(e,t){let r=[],n=new K(t.toString());while(!n.isEqual(e))try{const{default:e}=await i("d2a9")(`./UpgraderTo_${n.toString().replaceAll(".","_")}`);r.unshift(e),n=new K(e.sourceVersion)}catch(s){throw de.error("upgrader import error"),s}return new Promise((e=>e(r)))}findCompatibleConfigVersion(e){const t=ue[e];if(t)return new K(t);{const t=ue.latestConfigVersion;return de.warn(`No direct version mapping for SDK version '${e}'`),new K(t)}}}var he=new pe;class ve{static async load(e,t,i){"string"==typeof t&&(t=JSON.parse(t)),await he.upgrade(e,t,i),e.dispatch("VersionManager/setVersion",t.version);const r=E["a"].createHomeKitConfiguration(t);return r}}var me=i("a132");const fe=i("853f").default;var be=Object(oe["boot"])((async({store:e})=>{try{let t=await y["a"].loadConfiguration();const i=await y["a"].getGeneratorVersion(),r=await ve.load(e,t,i);fe.info(r,!0),e.dispatch("App/setAccessory",r.accessories[0],{root:!0}),e.dispatch("App/setSelectedItem",r.accessories[0],{root:!0})}catch(t){fe.error("Configuration loading failed"),fe.error(t,!0)}try{let e=await y["a"].loadAdkModels();fe.info("ADK models:"),fe.info(e,!0),e?me["a"].setModels(e):fe.warn("Missing ADK models, please use a proper SDK.")}catch(t){fe.error("ADK data loading failed"),fe.error(t,!0)}y["a"].onThemeChanged=e=>{fe.info("Theme change to "+e),"dark"==e&&ce["a"].set(!0),"light"==e&&ce["a"].set(!1)},y["a"].onSaveEvent=()=>{fe.info("Save event");const t=e.getters["App/configurationToSave"];y["a"].saveConfiguration(t),e.dispatch("App/setDirty",!1,{root:!0})},y["a"].onGenerationResult=()=>{fe.info("Generation Result event"),y["a"].loadGenerationResult().then((t=>{fe.info(t,!0),e.dispatch("GenerationResult/setGenerationResult",t,{root:!0})}))},y["a"].onContributionsEvent=()=>{fe.info("Contributions have been changed."),y["a"].loadContributions().then((t=>{let i;fe.info(t,!0),e.dispatch("App/setContributions",t,{root:!0}),i=null!==e.getters["App/selectedItem"].sourceFile&&e.getters["App/contributedServices"].length?e.getters["App/contributedServices"][0]:e.getters["App/accessory"],e.dispatch("App/setSelectedItem",i,{root:!0})}))};try{let{data:t}=await se.a.get("md/Homekit_configurator.md");e.dispatch("Markdown/setMarkdownContent",t,{root:!0})}catch(t){fe.error("Failed to load manual"),fe.error(t,!0)}y["a"].onGenerationResult(),y["a"].onContributionsEvent();try{await y["a"].init()}catch(i){fe.error(i,!0)}e.dispatch("init")}));const ge="";async function ye(){const{app:e,store:t,router:i}=await re();let n=!1;const s=e=>{n=!0;const t=Object(e)===e?i.resolve(e).route.fullPath:e;window.location.href=t},a=window.location.href.replace(window.location.origin,""),o=[void 0,ae,void 0,be];for(let l=0;!1===n&&l<o.length;l++)if("function"===typeof o[l])try{await o[l]({app:e,router:i,store:t,Vue:r["default"],ssrContext:null,redirect:s,urlPath:a,publicPath:ge})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==n&&new r["default"](e)}ye()},"31cd":function(e,t,i){},"4f54":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i("9c30"),n=i("1732");class s{static createCharacteristic(e,t){return new r["b"]({...e,variableName:(null===e||void 0===e?void 0:e.variableName)||"customCharacteristicVariableName",format:(null===e||void 0===e?void 0:e.format)||r["c"].string,iid:(null===e||void 0===e?void 0:e.iid)||0,type:(null===e||void 0===e?void 0:e.type)||Object(n["a"])(),properties:(null===e||void 0===e?void 0:e.properties)||[]},t)}static createService(e,t){var i;return new r["f"]({...e,variableName:(null===e||void 0===e?void 0:e.variableName)||"customService",iid:(null===e||void 0===e?void 0:e.iid)||0,type:(null===e||void 0===e?void 0:e.type)||Object(n["a"])(),properties:(null===e||void 0===e?void 0:e.properties)||[],characteristics:(null===e||void 0===e||null===(i=e.characteristics)||void 0===i?void 0:i.map((e=>s.createCharacteristic(e,this))))||[]},t)}static createAccessory(e,t){var i;return new r["a"]({...e,aid:(null===e||void 0===e?void 0:e.aid)||1,category:(null===e||void 0===e?void 0:e.category)||1,name:(null===e||void 0===e?void 0:e.name)||"HomeKit Accessory",manufacturer:(null===e||void 0===e?void 0:e.manufacturer)||"Silicon Labs",model:(null===e||void 0===e?void 0:e.model)||"EFR32x",serialNumber:(null===e||void 0===e?void 0:e.serialNumber)||"152405958",firmwareVersion:(null===e||void 0===e?void 0:e.firmwareVersion)||"1.0.0",hardwareVersion:(null===e||void 0===e?void 0:e.hardwareVersion)||"1.0.0",services:(null===e||void 0===e||null===(i=e.services)||void 0===i?void 0:i.map((e=>s.createService(e,this))))||[]},t)}static createHomeKitConfiguration(e,t){var i;return new r["e"]({version:null===e||void 0===e?void 0:e.version,accessories:(null===e||void 0===e||null===(i=e.accessories)||void 0===i?void 0:i.map((e=>s.createAccessory(e,t))))||[s.createAccessory()]})}}},"515a":function(e,t,i){"use strict";let r;i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return s})),function(e){e["error"]="error",e["warning"]="warning",e["info"]="info"}(r||(r={}));class n{constructor(e,t,i){this.type=e,this.id=t,this.message=i}}function s(e,t){const i=null===e||void 0===e?void 0:e.filter((e=>e.type==r.error&&(void 0===t||t.includes(e.id)))),n=null===e||void 0===e?void 0:e.filter((e=>e.type==r.warning&&(void 0===t||t.includes(e.id)))),s=null===e||void 0===e?void 0:e.filter((e=>e.type==r.info&&(void 0===t||t.includes(e.id))));let a;i.length>0?a=i:n.length>0?a=n:s.length>0&&(a=s);let o={type:null,messages:[]};return void 0!==a&&(o.type=a[0].type,o.messages=a.map((e=>e.message))),o}},"5ee1":function(e,t,i){"use strict";function r(e){var t=/^([_a-z][_0-9a-z]*)$/gim;return t.test(e)}function n(e){null!=e.data&&e.data.match(/([^0-9a-f-])/gi)&&e.preventDefault()}function s(e){const t=/["\\]/gim;return!t.test(e)}i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))},"9c30":function(e,t,i){"use strict";i.d(t,"g",(function(){return D})),i.d(t,"d",(function(){return V})),i.d(t,"c",(function(){return k})),i.d(t,"e",(function(){return T})),i.d(t,"a",(function(){return O})),i.d(t,"f",(function(){return R})),i.d(t,"b",(function(){return M})),i.d(t,"h",(function(){return j}));var r=i("9523"),n=i.n(r),s=i("2757"),a=i("1732");let o,c,l,u,d,p,h,v,m,f,b,g,y,w,E,S,I,N,_,A,D,C,V,k;(function(e){e["primaryService"]="primaryService",e["hidden"]="hidden",e["ble.supportsConfiguration"]="ble.supportsConfiguration"})(D||(D={})),function(e){e["readable"]="readable",e["writable"]="writable",e["supportsEventNotification"]="supportsEventNotification",e["supportsEventNotificationContextInformation"]="supportsEventNotificationContextInformation",e["hidden"]="hidden",e["requiresAdminPermissions"]="requiresAdminPermissions",e["readRequiresAdminPermissions"]="readRequiresAdminPermissions",e["writeRequiresAdminPermissions"]="writeRequiresAdminPermissions",e["requiresTimedWrite"]="requiresTimedWrite",e["supportsAuthorizationData"]="supportsAuthorizationData",e["ip.controlPoint"]="ip.controlPoint",e["ip.supportsWriteResponse"]="ip.supportsWriteResponse",e["ble.supportsBroadcastNotification"]="ble.supportsBroadcastNotification",e["ble.supportsDisconnectedNotification"]="ble.supportsDisconnectedNotification",e["ble.readableWithoutSecurity"]="ble.readableWithoutSecurity",e["ble.writableWithoutSecurity"]="ble.writableWithoutSecurity"}(C||(C={})),function(e){e["none"]="none",e["celsius"]="celsius",e["arcdegrees"]="arcdegrees",e["percentage"]="percentage",e["lux"]="lux",e["seconds"]="seconds"}(V||(V={})),function(e){e["bool"]="bool",e["tlv8"]="tlv8",e["data"]="data",e["string"]="string",e["float"]="float",e["int"]="int",e["uint8"]="uint8",e["uint16"]="uint16",e["uint32"]="uint32",e["uint64"]="uint64"}(k||(k={}));class T{constructor(e,t){this.sourceFile=null!==t&&void 0!==t?t:null,this.version=e.version,this.accessories=e.accessories.map((e=>new O(e,t)))}toJSON(){const{sourceFile:e,...t}=this;return t}}class O{constructor(e,t){n()(this,"vueId",Object(a["a"])()),n()(this,"validationMessages",[]),this.sourceFile=null!==t&&void 0!==t?t:null,this.aid=e.aid,this.category=e.category,this.name=e.name,this.productData=e.productData,this.manufacturer=e.manufacturer,this.model=e.model,this.serialNumber=e.serialNumber,this.firmwareVersion=e.firmwareVersion,this.hardwareVersion=e.hardwareVersion,this.services=e.services.map((e=>new R(e,this)))}get visibleName(){return this.name}get children(){return this.services}set children(e){this.services=e}get homekitType(){return s["b"].accessory}accept(e){e.visit(this),this.children&&this.children.forEach((t=>t.accept(e)))}toJSON(){const{vueId:e,sourceFile:t,validationMessages:i,...r}=this;return r}}class R{constructor(e,t){n()(this,"vueId",Object(a["a"])()),n()(this,"validationMessages",[]),this.parent=t||null,this.sourceFile=(null===t||void 0===t?void 0:t.sourceFile)||null,this.variableName=e.variableName,this.name=e.name,this.iid=e.iid,this.type=e.type,this.debugDescription=e.debugDescription,this.properties=e.properties.map((e=>D[e])),this.linkedServices=e.linkedServices?[...e.linkedServices]:[],this.characteristics=e.characteristics.map((e=>new M(e,this))),e.contributionId&&(this.contributionId=e.contributionId)}get visibleName(){return this.variableName}get children(){return this.characteristics}set children(e){this.characteristics=e}get homekitType(){return s["b"].service}accept(e){e.visit(this),this.children&&this.children.forEach((t=>t.accept(e)))}toJSON(){const{vueId:e,parent:t,sourceFile:i,validationMessages:r,...n}=this;return n}}class M{constructor(e,t){n()(this,"vueId",Object(a["a"])()),n()(this,"validationMessages",[]),this.parent=t||null,this.sourceFile=(null===t||void 0===t?void 0:t.sourceFile)||null,this.variableName=e.variableName,this.format=e.format,this.iid=e.iid,this.type=e.type,this.debugDescription=e.debugDescription,this.manufacturerDescription=e.manufacturerDescription,this.properties=e.properties.map((e=>C[e])),this.callbacks=e.callbacks?{...e.callbacks}:void 0,this.contextCallbacks=e.contextCallbacks?{...e.contextCallbacks}:void 0;const i=new $[e.format](e);this.unit=null===i||void 0===i?void 0:i.unit,this.constraints=null===i||void 0===i?void 0:i.constraints}get visibleName(){return this.variableName}get homekitType(){return s["b"].characteristic}accept(e){e.visit(this)}toJSON(){const{vueId:e,parent:t,sourceFile:i,validationMessages:r,...n}=this;return n}}class x{constructor(){n()(this,"unit",void 0),n()(this,"constraints",void 0)}}class L{constructor(e){var t;n()(this,"unit",void 0),this.constraints={maxLength:isNaN(null===e||void 0===e||null===(t=e.constraints)||void 0===t?void 0:t.maxLength)?null:e.constraints.maxLength}}}class q{constructor(e){var t,i,r;this.unit=null===e||void 0===e?void 0:e.unit,this.constraints={minimumValue:isNaN(null===e||void 0===e||null===(t=e.constraints)||void 0===t?void 0:t.minimumValue)?null:e.constraints.minimumValue,maximumValue:isNaN(null===e||void 0===e||null===(i=e.constraints)||void 0===i?void 0:i.maximumValue)?null:e.constraints.maximumValue,stepValue:isNaN(null===e||void 0===e||null===(r=e.constraints)||void 0===r?void 0:r.stepValue)?null:e.constraints.stepValue}}}class P{constructor(e){var t,i,r,n,s;this.unit=null===e||void 0===e?void 0:e.unit,this.constraints={minimumValue:isNaN(null===e||void 0===e||null===(t=e.constraints)||void 0===t?void 0:t.minimumValue)?null:e.constraints.minimumValue,maximumValue:isNaN(null===e||void 0===e||null===(i=e.constraints)||void 0===i?void 0:i.maximumValue)?null:e.constraints.maximumValue,stepValue:isNaN(null===e||void 0===e||null===(r=e.constraints)||void 0===r?void 0:r.stepValue)?null:e.constraints.stepValue,validValues:null!==e&&void 0!==e&&null!==(n=e.constraints)&&void 0!==n&&n.validValues?[...e.constraints.validValues.filter((e=>!isNaN(e)))]:void 0,validValuesRanges:null!==e&&void 0!==e&&null!==(s=e.constraints)&&void 0!==s&&s.validValuesRanges?e.constraints.validValuesRanges.filter((e=>!e.includes(NaN))).map((e=>[...e])):void 0}}}o=k.bool,c=k.tlv8,l=k.data,u=k.string,d=k.float,p=k.int,h=k.uint16,v=k.uint32,m=k.uint64,f=k.uint8;class U{constructor(){n()(this,o,new x),n()(this,c,new x),n()(this,l,new L),n()(this,u,new L),n()(this,d,new q),n()(this,p,new q),n()(this,h,new q),n()(this,v,new q),n()(this,m,new q),n()(this,f,new P)}}const j=new U;b=k.bool,g=k.tlv8,y=k.data,w=k.string,E=k.float,S=k.int,I=k.uint16,N=k.uint32,_=k.uint64,A=k.uint8;class W{constructor(){n()(this,b,x),n()(this,g,x),n()(this,y,L),n()(this,w,L),n()(this,E,q),n()(this,S,q),n()(this,I,q),n()(this,N,q),n()(this,_,q),n()(this,A,P)}}const $=new W},a132:function(e,t,i){"use strict";var r=i("9523"),n=i.n(r),s=i("1732"),a=i("2757");class o{constructor(e,t){var i;n()(this,"vueId",Object(s["a"])()),this.name=e.name,this.type=null!==(i=e.uuid)&&void 0!==i?i:e.type,this.format=e.format,this.properties=e.properties||[],this.unit=e.unit,this.constraints=e.constraints,this.iid=e.iid,this.parent=t||null}get visibleName(){return this.name}get homekitType(){return a["b"].characteristic}toJSON(){const{vueId:e,parent:t,...i}=this;return i}get variableName(){let e=this.name.split(" ").join("")+"Characteristic";return e=this.parent?this.parent.variableNamePreTag+e:e.charAt(0).toLowerCase()+e.slice(1),e}accept(e){e.visit(this)}}class c{constructor(e,t){var i;n()(this,"vueId",Object(s["a"])()),this.name=e.name,this.type=null!==(i=e.uuid)&&void 0!==i?i:e.type,this.requiredCharacteristics=Array.isArray(null===e||void 0===e?void 0:e.requiredCharacteristics)?e.requiredCharacteristics.map((e=>{let i=new o(t.get(e),this);return i.required=!0,i})):[],this.optionalCharacteristics=Array.isArray(null===e||void 0===e?void 0:e.optionalCharacteristics)?e.optionalCharacteristics.map((e=>{let i=new o(t.get(e),this);return i.required=!1,i})):[],this.iid=null===e||void 0===e?void 0:e.iid,this.parent=null}get visibleName(){return this.name}get children(){let e=this.requiredCharacteristics||[],t=this.optionalCharacteristics||[];return e.concat(t)}get characteristics(){return this.children}get homekitType(){return a["b"].service}toJSON(){const{vueId:e,parent:t,...i}=this;return i}get variableNamePreTag(){const e=this.name.split(" ").join("");return e.charAt(0).toLowerCase()+e.slice(1)}get variableName(){return this.variableNamePreTag+"Service"}accept(e){e.visit(this),this.children&&this.children.forEach((t=>t.accept(e)))}}class l{constructor(){n()(this,"_characteristics",[]),n()(this,"_characteristicMap",new Map),n()(this,"_characteristicDescriptionMap",new Map),n()(this,"_services",[]),n()(this,"_serviceMap",new Map),n()(this,"_serviceDescriptionMap",new Map),n()(this,"_accessoryCategoryMap",new Map),n()(this,"_characteristicUUIDs",[]),n()(this,"_serviceUUIDs",[])}setCharacteristics(e){this._characteristics=e.map((e=>new o(e))),this._characteristicMap=new Map(this._characteristics.map((e=>[e.type,e]))),this._characteristicUUIDs=[...this._characteristicMap.keys()]}setServices(e){this._services=e.map((e=>new c(e,this._characteristicMap))),this._serviceMap=new Map(this._services.map((e=>[e.type,e]))),this._serviceUUIDs=[...this._serviceMap.keys()]}setAccessoryCategories(e){this._accessoryCategoryMap=new Map(Object.entries(e).map((([e,t])=>[parseInt(e),t])))}setCharacteristicDescriptions(e){this._characteristicDescriptionMap=new Map(Object.entries(e))}setServiceDescriptions(e){this._serviceDescriptionMap=new Map(Object.entries(e))}setModels(e){Array.isArray(e.characteristics)&&this.setCharacteristics(e.characteristics),Array.isArray(e.services)&&this.setServices(e.services),e.accessoryCategories&&this.setAccessoryCategories(e.accessoryCategories),e.characteristicDescriptions&&this.setCharacteristicDescriptions(e.characteristicDescriptions),e.serviceDescriptions&&this.setServiceDescriptions(e.serviceDescriptions)}get characteristics(){return this._characteristics}get services(){return this._services}get characteristicMap(){return this._characteristicMap}get serviceMap(){return this._serviceMap}get accessoryCategoryMap(){return this._accessoryCategoryMap}get characteristicDescriptionMap(){return this._characteristicDescriptionMap}get serviceDescriptionMap(){return this._serviceDescriptionMap}get characteristicUUIDs(){return this._characteristicUUIDs}get serviceUUIDs(){return this._serviceUUIDs}}let u=new l;window.adkModels=u,t["a"]=u},a883:function(e,t,i){"use strict";var r;r=i("d48b").default,t["a"]=r},d2a9:function(e,t,i){var r={"./UpgraderTo_1_0_1":["623c",1],"./UpgraderTo_1_0_1.ts":["623c",1],"./UpgraderTo_1_1_0":["2a55",2],"./UpgraderTo_1_1_0.ts":["2a55",2]};function n(e){if(!i.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return i.e(t[1]).then((function(){return i(n)}))}n.keys=function(){return Object.keys(r)},n.id="d2a9",e.exports=n},d48b:function(e,t,i){"use strict";i.r(t);var r=i("9523"),n=i.n(r),s=i("c4d0"),a=i.n(s);const o=i("853f").default;class c extends a.a{onMessageHandler(e){try{var t;let i=JSON.parse(e.data);null===(t=this.listeners.get(null===i||void 0===i?void 0:i.type))||void 0===t||t.forEach((e=>e(i.data)))}catch(a){var i;if("themeLight"==e.data)null===(i=this.listeners.get("theme"))||void 0===i||i.forEach((e=>e("light")));else if("themeDark"==e.data){var r;null===(r=this.listeners.get("theme"))||void 0===r||r.forEach((e=>e("dark")))}else if("save"==e.data){var n;null===(n=this.listeners.get("save"))||void 0===n||n.forEach((e=>e()))}else if("generationResult"==e.data){var s;null===(s=this.listeners.get("generationResult"))||void 0===s||s.forEach((e=>e()))}else o.error("Unknown WebSocket message")}}}var l=i("bc3a"),u=i.n(l);const d="/rest/homekitConfigurator/";let p=new URL(window.location.href).searchParams.get("id"),h="ws://"+window.location.host+"/ws/homekitConfigurator/"+p;class v{constructor(){n()(this,"webSocketRouter",new c(h)),n()(this,"onThemeChanged",(e=>{})),n()(this,"onSaveEvent",(()=>{})),n()(this,"onGenerationResult",(()=>{})),n()(this,"onContributionsEvent",(()=>{})),n()(this,"themeChanged",(e=>this.onThemeChanged(e))),n()(this,"saveEvent",(()=>this.onSaveEvent())),n()(this,"generationResultEvent",(()=>this.onGenerationResult())),n()(this,"contributionsEvent",(()=>this.onContributionsEvent())),this.webSocketRouter.addListener("theme",this.themeChanged),this.webSocketRouter.addListener("save",this.saveEvent),this.webSocketRouter.addListener("generationResult",this.generationResultEvent),this.webSocketRouter.addListener("contributionsChanged",this.contributionsEvent)}async init(){null!=p&&await this.webSocketRouter.connect()}loadConfiguration(){var e=d+"data?id="+p;return u.a.get(e).then((e=>e.data))}saveConfiguration(e){var t=d+"save/";u.a.post(t,e,{headers:{editorId:p}}).then((()=>this.setDirty(!1))).catch((e=>console.log("saveConfiguration returned ERROR: ",e.response.data)))}loadContributions(){var e=d+"contributions?id="+p;return u.a.get(e).then((e=>e.data))}saveContributions(e){var t=d+"saveContributions/";u.a.post(t,e,{headers:{editorId:p}}).catch((e=>console.log("saveContributions returned ERROR: ",e.response.data)))}setDirty(e){var t=d+"dirty/";u.a.post(t,JSON.stringify(e),{headers:{editorId:p}}).catch((e=>console.log("setDirty returned ERROR: ",e.response.data)))}loadGenerationResult(){var e=d+"generationResult?id="+p;return u.a.get(e).then((e=>e.data))}loadAdkModels(){var e=d+"adkModels?id="+p;return u.a.get(e).then((e=>e.data))}getGeneratorVersion(){var e=d+"generatorversion?id="+p;return u.a.get(e).then((e=>{let t=e.data;if(e.data){const i=/[0-9]+\.[0-9]+\.[0-9]+/;t=e.data.match(i)}return t}))}}const m=new v;t["default"]=m}});