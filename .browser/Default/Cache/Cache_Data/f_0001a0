(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{2290:function(e,t,a){"use strict";a("ece4")},"3eeb":function(e,t,a){},"3f52":function(e,t,a){"use strict";a("c2cb")},6242:function(e,t,a){},"7f95":function(e,t,a){"use strict";a("dc22")},"8c48":function(e,t,a){"use strict";a("3eeb")},"9b81":function(e,t,a){"use strict";a("6242")},"9ccc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh Lpr lff"},on:{scroll:e.onScroll}},[a("q-header",{staticClass:"header",attrs:{elevated:""}},[a("div",{staticClass:"row items-center no-wrap"},[a("div",{staticClass:"row items-center no-wrap",staticStyle:{width:"450px"}},[a("q-img",{staticClass:"q-ml-sm",staticStyle:{height:"auto",width:"32px"},attrs:{src:"icons/favicon-128x128.png","no-default-spinner":""}}),a("div",{staticClass:"text-h6 q-py-sm q-px-md",attrs:{"data-cy":"main-title"}},[e._v("\n          HomeKit Configurator\n        ")])],1),a("q-separator",{staticClass:"gt-sm bg-grey-6",attrs:{vertical:""}}),e.adkLayoutOn?a("q-btn",e._b({staticClass:"q-mx-md q-pr-sm",attrs:{dense:"","no-caps":"",icon:"chevron_left",color:"primary",label:"Back","data-cy":"btn-adk-back"},on:{click:function(t){return e.setAdkLayoutOn(!1)}}},"q-btn",e.BUTTON_PROPS,!1)):e._e(),a("ActivePageTitle",{staticClass:"col"}),e.generationFailed?a("div",{staticClass:"text-negative q-mr-md row items-center cursor-pointer",attrs:{"data-cy":"btn-generation-failed"},on:{click:e.showGenerationResultDialog}},[a("q-icon",{attrs:{name:"error",size:"sm",color:"negative"}}),e.adkLayoutOn?e._e():a("span",{staticClass:"q-ml-xs gt-sm"},[e._v("\n          Last Generation has Failed\n        ")]),a("q-tooltip",[e._v("\n          Click to show the Generation Results.\n        ")])],1):e._e(),e.platformHandler?a("q-btn",e._b({staticClass:"q-mr-sm q-px-xs",attrs:{dense:"",label:"Save",icon:"mdi-content-save",color:"primary",size:"m"},on:{click:function(t){return e.platformHandler.onSaveEvent()}}},"q-btn",e.BUTTON_PROPS,!1)):e._e(),a("q-btn",e._b({staticClass:"q-mr-sm q-px-xs",attrs:{dense:"",label:"View Manual",color:"primary",size:"m","data-cy":"btn-manual"},on:{click:function(t){return e.goToMarkdownId(null)}}},"q-btn",e.BUTTON_PROPS,!1))],1)]),a("q-drawer",{attrs:{value:!0,mini:e.mini,"show-if-above":"",elevated:"",behavior:"desktop",width:450,"mini-width":32}},[a("div",{staticClass:"fit column"},[a("div",{staticClass:"row justify-between items-center q-py-xs"},[a("ButtonBar",{staticClass:"q-mini-drawer-hide q-pl-md"}),a("q-btn",{attrs:{dense:"",flat:"",color:"primary",icon:e.mini?"mdi-chevron-double-right":"mdi-chevron-double-left","data-cy":"btn-drawer-open-close"},on:{click:function(t){e.mini=!e.mini}}})],1),a("q-separator",{staticClass:"q-mini-drawer-hide",staticStyle:{height:"1px"}}),a("div",{staticClass:"col q-mini-drawer-hide"},[a("q-scroll-area",{staticClass:"fit"},[a("HomekitTree")],1)],1)],1)]),a("q-page-container",[a("q-page",{staticClass:"column",attrs:{padding:""}},[e.adkLayoutOn?a("AdkLayout"):e.layout==e.HOMEKIT_TYPES.accessory?a("AccessoryLayout"):e.layout==e.HOMEKIT_TYPES.service?a("ServiceLayout"):e.layout==e.HOMEKIT_TYPES.characteristic?a("CharacteristicLayout"):e._e()],1)],1),a("UpgradeRuleDialog",{attrs:{"upgrade-results":e.upgradeResults}}),a("GenerationResultDialog",{ref:"generation-result-dialog",attrs:{filename:e.filename,"generation-result":e.generationResult}}),a("q-dialog",{attrs:{value:e.showOlderVersionDialog,"data-cy":"older-version-dialog"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("SDK Version Warning")])]),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n        "+e._s(e.olderVersionDialogText)+"\n      ")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"OK",color:"primary",autofocus:""},on:{click:function(t){return e.setOlderVersionDialog({show:!1})}}})],1)],1)],1),a("WaspMarkdown",{attrs:{"image-tag":"./md/"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(e.allValidation))])],1)},i=[],c=a("2f62");const r={outlined:!0,dense:!0,hideBottomSpace:!0},n={flat:!0,round:!0,dense:!0,color:"primary"},l={outline:!0,"no-caps":!0},o={accessory:{name:"mdi-alpha-a-box-outline",color:"blue"},service:{name:"mdi-alpha-s-box-outline",color:"green"},characteristic:{name:"mdi-alpha-c-box-outline",color:"orange"}};var d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row q-gutter-sm"},[a("div",{attrs:{"data-cy":"btn-button-bar-custom-add"}},[a("q-btn",e._b({attrs:{icon:"mdi-file-plus-outline",disable:!e.newChildActive},on:{click:function(t){e.showTooltip=!1}}},"q-btn",e.BUTTON_BAR_PROPS,!1),[a("q-menu",[a("q-list",{attrs:{dense:""}},[a("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-service"},on:{click:function(t){return e.addItem(e.HOMEKIT_TYPES.service)}}},[a("q-item-section",[e._v("New Service")])],1),a("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-characteristic"},on:{click:function(t){return e.addItem(e.HOMEKIT_TYPES.characteristic)}}},[a("q-item-section",[e._v("New Characteristic ")])],1)],1)],1)],1),a("q-tooltip",{model:{value:e.showTooltip,callback:function(t){e.showTooltip=t},expression:"showTooltip"}},[e._v("Add new item")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-copy"}},[a("q-btn",e._b({attrs:{icon:"mdi-content-copy",disable:!e.duplicateActive},on:{click:function(t){e.duplicateSelectedItem(),e.duplicateItemNotify()}}},"q-btn",e.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[e._v("Duplicate selected item")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-move-up"}},[a("q-btn",e._b({attrs:{icon:"mdi-arrow-up",disable:!e.moveUpActive},on:{click:e.moveUpSelectedItem}},"q-btn",e.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[e._v("\n        Move up selected item\n      ")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-move-down"}},[a("q-btn",e._b({attrs:{icon:"mdi-arrow-down",disable:!e.moveDownActive},on:{click:e.moveDownSelectedItem}},"q-btn",e.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[e._v("Move down selected item")])],1),a("q-btn",e._b({class:{"button-text":e.adkLayoutOn},attrs:{outline:!e.adkLayoutOn,icon:"mdi-plus-thick","data-cy":"btn-button-bar-adk"},on:{click:function(t){return e.setAdkLayoutOn(!e.adkLayoutOn)}}},"q-btn",e.BUTTON_BAR_PROPS,!1),[a("q-tooltip",[e._v("Toggle - Add Standard ADK items - view")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-remove"}},[a("q-btn",e._b({attrs:{color:"negative",icon:"mdi-close-thick",disable:!e.removeActive},on:{click:function(t){e.deleteConfirm=!0}}},"q-btn",e.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[e._v("Delete selected item (Ctrl + Del)")])],1)],1),a("q-dialog",{model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-gutter-md"},[a("q-icon",{attrs:{name:"mdi-alert-circle ",color:"negative",size:"md"}}),a("div",[e._v("\n          Are you sure you want to permanently delete the selected item?\n        ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"btn-button-bar-remove-pop-up-delete",label:"Delete",outline:"",color:"negative",autofocus:""},on:{click:e.removeSelectedItem}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"btn-button-bar-remove-pop-up-cancel",flat:"",label:"Cancel",color:"primary"}})],1)],1)],1),a("KeyboardShortcut",{attrs:{ctrl:"",shortcut:"Delete",disable:!e.removeActive},on:{trigger:function(t){e.deleteConfirm=!0}}})],1)},u=[],p=a("2757"),m=a("af17"),v=(a("dffb"),a("4f54")),b=a("b923"),h=a.n(b),y=a("193c");const g={adk_homekit_item_added:{single:{service:" Service",characteristic:" Characteristic",item:" HomeKit item",added:" has been added successfully."},multiple:{service:" Services",characteristic:" Characteristics",item:" HomeKit items",added:" have been added successfully."}},new_custom_item:{custom:"Custom ",added:" has been added."},duplicate_item:{duplicated:" has been duplicated."},import_item:{success:"Import has been successful."}};function f({homekitType:e,homekitItem:t}){if(null==e)return;if(null==t)return;let a={};switch(Object.keys(p["b"]).forEach((e=>a[e]=0)),e){case p["b"].accessory:a.accessory=1,a.service=t.services.length,t.services.forEach((e=>{a.characteristic+=e.characteristics.length}));break;case p["b"].service:a.service=1,a.characteristic=t.characteristics.length;break;case p["b"].characteristic:a.characteristic=1;break}return a}function C(e){if(null==e)return null;let t={title:"",svgIcon:y["a"],details:""};if(e.service+e.characteristic==0)return null;if(e.service+e.characteristic==1){t["title"]=1+g.adk_homekit_item_added.single.item+g.adk_homekit_item_added.single.added;for(const a in e)if(e[a]>0){t["details"]=1+g.adk_homekit_item_added.single[a]+".";break}}else t["title"]=e.service+e.characteristic+g.adk_homekit_item_added.multiple.item+g.adk_homekit_item_added.multiple.added,e.service>0&&(1==e.service?t["details"]=1+g.adk_homekit_item_added.single.service:t["details"]=e.service+g.adk_homekit_item_added.multiple.service),e.characteristic>0&&(""!=t["details"]&&(t["details"]+=", "),1==e.characteristic?t["details"]+=1+g.adk_homekit_item_added.single.characteristic:t["details"]+=e.characteristic+g.adk_homekit_item_added.multiple.characteristic),t["details"]+=".";return t}function k(e){let t={title:g.new_custom_item.custom+e+g.new_custom_item.added,svgIcon:y["a"]};return t}function _(e){let t={title:"'"+e+"'"+g.duplicate_item.duplicated,svgIcon:y["a"]};return t}function I(){let e={title:g.import_item.success,svgIcon:y["a"]};return e}var O={namespaced:!0,components:{KeyboardShortcut:h.a},data:()=>({showTooltip:!1,BUTTON_BAR_PROPS:{color:"primary",outline:!0,dense:!0,size:"sm"},ICONS:o,HOMEKIT_TYPES:p["b"],deleteConfirm:!1,uploaderDialog:!1,uploaderError:null}),computed:{...Object(c["mapGetters"])("App",["accessory","serviceContributions","selectedItem","itemByVueId","adkLayoutOn"]),...Object(c["mapGetters"])("Validation",["instanceIds"]),newChildActive(){return!this.selectedItem.sourceFile},duplicateActive(){return Object.values(p["b"]).includes(this.selectedItem.homekitType)&&this.selectedItem.homekitType!=p["b"].accessory&&!this.selectedItem.sourceFile||this.selectedItem.sourceFile&&this.selectedItem.homekitType==p["b"].service},removeActive(){return Object.values(p["b"]).includes(this.selectedItem.homekitType)&&this.selectedItem.homekitType!=p["b"].accessory&&!this.selectedItem.sourceFile},moveUpActive(){if(this.selectedItem.parent&&!this.selectedItem.sourceFile){let e=this.selectedItem.parent.children;return e.indexOf(this.selectedItem)>0}return!1},moveDownActive(){if(this.selectedItem.parent&&!this.selectedItem.sourceFile){let e=this.selectedItem.parent.children;return e.indexOf(this.selectedItem)<e.length-1}return!1}},methods:{...Object(c["mapActions"])("App",["setSelectedItem","removeSelectedItem","duplicateSelectedItem","moveUpSelectedItem","moveDownSelectedItem","addHomekitItem","setDialogOn","setAdkLayoutOn"]),addItem(e){let t=null,a=this.instanceIds.length>0?Math.max(...this.instanceIds)+1:2;if(e==p["b"].service)t=v["a"].createService({iid:a}),t.variableName=t.variableName+a;else{if(e!=p["b"].characteristic)return;t=v["a"].createCharacteristic({iid:a}),t.variableName=t.variableName+a}this.addHomekitItem({homekitItem:t,homekitType:e}),this.$q.notify(m["Notifications"].qNotificationHtmlObj(m["Notifications"].notificationHtmlMsg(k(e))))},duplicateItemNotify(){this.$q.notify(m["Notifications"].qNotificationHtmlObj(m["Notifications"].notificationHtmlMsg(_(this.selectedItem.visibleName))))},importNotify(){this.$q.notify(m["Notifications"].qNotificationHtmlObj(m["Notifications"].notificationHtmlMsg(I(this.selectedItem.visibleName))))}},watch:{deleteConfirm:function(){this.setDialogOn(this.deleteConfirm)},uploaderDialog:function(){this.setDialogOn(this.uploaderDialog)}}},T=O,q=a("2877"),x=a("9c40"),S=a("4e73"),V=a("1c1c"),w=a("66e5"),M=a("4074"),N=a("05c0"),P=a("24e8"),D=a("f09f"),j=a("a370"),E=a("0016"),A=a("4b7e"),R=a("eb85"),H=a("54e1"),Q=a("ee89"),U=a("7f67"),$=a("eebe"),B=a.n($),L=Object(q["a"])(T,d,u,!1,null,null,null),K=L.exports;B()(L,"components",{QBtn:x["a"],QMenu:S["a"],QList:V["a"],QItem:w["a"],QItemSection:M["a"],QTooltip:N["a"],QDialog:P["a"],QCard:D["a"],QCardSection:j["a"],QIcon:E["a"],QCardActions:A["a"],QSeparator:R["a"],QBanner:H["a"],QUploader:Q["a"]}),B()(L,"directives",{ClosePopup:U["a"]});var F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pt-sm"},[a("div",{staticClass:"row treeNode items-center",class:{selectedNode:e.accessory==e.selectedItem}},[a("div",{staticClass:"col-auto"},[a("q-icon",{staticClass:"invisible",attrs:{name:"mdi-menu-down",size:"sm"}})],1),a("HomekitTreeItem",{staticClass:"col cursor-pointer",attrs:{value:e.accessory},on:{click:e.setSelectedItem}}),a("HomekitTreeItemValidation",{attrs:{"homekit-item":e.accessory}}),a("q-badge",{staticClass:"q-ma-xs q-mr-md",staticStyle:{height:"16px"},attrs:{color:"primary",outline:""}},[e._v("\n      "+e._s(e.accessory.aid)+"\n      "),a("q-tooltip",[e._v("\n        Accessory ID\n      ")])],1)],1),a("DragTree",{staticClass:"q-pl-md",attrs:{value:e.accessory.services,setChildren:e.setKids,nodeKey:"vueId",expandDefault:!0,groups:e.groups,level:1,selected:e.selectedItem},on:{input:function(t){return e.setKids(e.accessory,t)}},scopedSlots:e._u([{key:"label",fn:function(t){var s=t.node;return[a("div",{staticClass:"row"},[a("HomekitTreeItem",{staticClass:"cursor-pointer col",attrs:{value:s},on:{click:e.setSelectedItem}}),a("HomekitTreeItemValidation",{attrs:{"homekit-item":s}}),a("q-badge",{staticClass:"q-ma-xs q-mr-md items-center row",staticStyle:{height:"16px"},attrs:{color:"secondary",outline:""}},[e._v("\n          "+e._s(s.iid)+"\n          "),a("q-tooltip",[e._v("\n            Instance ID\n          ")])],1)],1)]}}])}),e.contributedServices.length?a("div",{staticClass:"row items-center q-px-md"},[a("q-separator",{staticClass:"col"}),a("div",{staticClass:"text-caption q-px-sm text-grey"},[e._v("\n      Contributed items\n    ")]),a("q-separator",{staticClass:"col"}),a("q-icon",{staticClass:"q-ml-sm",attrs:{name:"mdi-information-outline",size:"sm",color:"grey-5"}},[a("q-tooltip",[e._v("\n        The following items are contributed by software components.\n      ")])],1)],1):e._e(),e.contributedServices.length?a("DragTree",{staticClass:"q-pl-md",attrs:{value:e.contributedServices,nodeKey:"vueId",expandDefault:!0,dragOptions:{disabled:!0},readOnly:"",level:1,selected:e.selectedItem},scopedSlots:e._u([{key:"label",fn:function(t){var s=t.node;return[a("div",{staticClass:"row"},[a("HomekitTreeItem",{staticClass:"cursor-pointer text-italic col",attrs:{value:s},on:{click:e.setSelectedItem}}),a("HomekitTreeItemValidation",{attrs:{"homekit-item":s}}),a("q-badge",{staticClass:"q-ma-xs q-mr-md items-center row",staticStyle:{height:"16px"},attrs:{color:"secondary",outline:""}},[e._v("\n          "+e._s(s.iid)+"\n          "),a("q-tooltip",[e._v("\n            Instance ID\n          ")])],1)],1)]}}],null,!1,1340340473)}):e._e()],1)},z=[],Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vuedraggable",e._g(e._b({staticClass:"item-container",attrs:{tag:"div",value:e.value,group:e.groups[0]||e.level},on:{input:e.emitter,change:e.changed}},"vuedraggable",e.dragOptions,!1),e.dragEvents),e._l(e.value,(function(t){return a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hide&&!t.hide,expression:"!hide && !node.hide"}],key:t[e.nodeKey]},[a("div",{staticClass:"row treeNode",class:{selectedNode:t==e.selected},style:e.leftMargin},[a("div",{staticClass:"col-auto"},[a("q-icon",{staticClass:"cursor-pointer",class:{invisible:!(t.children&&t.children.length)},attrs:{name:e.isExpanded(t)?"mdi-menu-down":"mdi-menu-right",size:"sm"},on:{click:function(a){e.setExpanded(t,!e.isExpanded(t))}}})],1),a("div",{staticClass:"col"},[e._t("label",(function(){return[e._v("error")]}),{node:t})],2)]),!t.children||e.readOnly&&!e.isExpanded(t)?e._e():a("DragTree",{staticClass:"q-pl-md",attrs:{value:t.children,nodeKey:e.nodeKey,groups:e.groups.slice(1),level:e.level+1,expandDefault:e.expandDefault,hide:!e.isExpanded(t),setChildren:e.setChildren,dragOptions:e.dragOptions,dragEvents:e.dragEvents,selected:e.selected,readOnly:e.readOnly},on:{input:function(a){return e.setChildren(t,a)}},scopedSlots:e._u([{key:"label",fn:function(t){return[e._t("label",(function(){return[e._v("he")]}),{node:t.node})]}}],null,!0)})],1)})),0)},G=[],W=a("b76a"),Z=a.n(W),J=!1,X=!1,ee=!1;function te(e,t){null==e||e.homekitType!=t||J||ae(e.vueId)}function ae(e){if(ee)return void(ee=!1);const t=document.getElementById(e);if(null==t)return;const a=t.offsetTop-10;J=!0,X=!0,window.scrollTo(0,a),J=!1}function se({position:e},t,a){if(J)return null;if(X)return X=!1,null;var s;switch(t.homekitType){case p["a"].accessory:return;case p["a"].service:s=a.services;break;default:if(null==t["parent"])return null;s=t["parent"].children;break}let i;for(const n in s){const t=s[n],a=document.getElementById(t.vueId);if(null!==a){if(a.offsetTop>=e+300){void 0===i&&(i=t);break}i=t}}var c,r;return c=document.body.scrollHeight,r=window.scrollY+window.innerHeight,r>=c&&(i=s[s.length-1]),void 0!==i?(ee=!0,setTimeout((()=>{ee=!1}),1e3),i):null}var ie={name:"DragTree",components:{vuedraggable:Z.a},props:{nodeKey:{default:"vueId"},groups:{type:Array,default:()=>[]},level:{default:0,type:Number},expandDefault:{type:Boolean,default:!1},value:{required:!1,type:Array},dragEvents:{type:Object,default:()=>{}},dragOptions:{type:Object,default:()=>{}},hide:Boolean,setChildren:{type:Function,default(e,t){e.children=t}},readOnly:{type:Boolean,default:!1},expandedItems:Set,selected:Object},data:()=>({shift:15,expanded_local:null}),created(){if(this.expandedItems||(this.expanded_local=new Set),this.expandDefault){let e=new Set(this.expanded);for(let t of this.value)e.add(t[this.nodeKey]);this.expanded=e}},watch:{},computed:{...Object(c["mapGetters"])("App",["selectedItem"]),leftMargin(){const e=16*this.level;return`margin-left: -${e}px; padding-left: ${e}px;`},expanded:{get(){return this.expandedItems||this.expanded_local},set(e){this.expandedItems||(this.expanded_local=e),this.$emit("update:expandedItems",e)}}},methods:{emitter(e){this.$emit("input",e)},isExpanded(e){return this.expanded.has(e[this.nodeKey])},setExpanded(e,t){let a=new Set(this.expanded);t?a.add(e[this.nodeKey]):a.delete(e[this.nodeKey]),this.expanded=a},changed(){ae(this.selectedItem.vueId)}}},ce=ie,re=Object(q["a"])(ce,Y,G,!1,null,null,null),ne=re.exports;B()(re,"components",{QIcon:E["a"]});var le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row q-gutter-xs",attrs:{"data-cy":"homekit-tree-item-"+e.value.homekitType},on:{click:e.onClick,mousedown:e.onMouseDown}},[a("q-icon",{attrs:{size:"sm",name:e.ICONS[e.value.homekitType].name,color:e.ICONS[e.value.homekitType].color}},[a("q-tooltip",[a("div",{staticClass:"text-capitalize"},[e._v(e._s(e.value.homekitType))])])],1),a("div",{staticClass:"col",staticStyle:{"overflow-wrap":"break-word"}},[e._v("\n    "+e._s(e.value.visibleName)+"\n  ")])],1)},oe=[],de={name:"HomekitTreeItem",data(){return{ICONS:o}},props:{value:{type:Object,required:!0}},methods:{onClick(){this.$emit("click",this.value)},onMouseDown(){this.$emit("mousedown",this.value)}}},ue=de,pe=Object(q["a"])(ue,le,oe,!1,null,null,null),me=pe.exports;B()(pe,"components",{QIcon:E["a"],QTooltip:N["a"]});var ve=a("853f"),be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.validationMessages.length>0?a("div",{},[a("ValidationMarker",{attrs:{type:e.cumulatedValMsgs.type,messages:e.cumulatedValMsgs.messages}})],1):e._e()},he=[],ye=a("c78e"),ge=a("515a"),fe={name:"HomekitTreeItemValidation",components:{ValidationMarker:ye["ValidationMarker"]},props:{homekitItem:{type:Object,required:!0}},computed:{validationMessages(){return this.homekitItem.validationMessages},cumulatedValMsgs(){return Object(ge["c"])(this.validationMessages)}},methods:{}},Ce=fe,ke=Object(q["a"])(Ce,be,he,!1,null,null,null),_e=ke.exports,Ie={namespaced:!0,components:{DragTree:ne,HomekitTreeItem:me,HomekitTreeItemValidation:_e},data:()=>({ICONS:o,HOMEKIT_TYPES:p["a"],groups:[p["a"].service,p["a"].characteristic]}),computed:{...Object(c["mapGetters"])("App",["accessory","mergedAccessory","contributedServices","selectedItem"])},methods:{addDroppedAdkItem(e,t,a){let s=t[a];const{homekitType:i,homekitItem:c}=s;if(!i||!c)throw"Faulty ADK item!";{if(ve["default"].debug("Add ADK item:"),ve["default"].debug(c,!0),i==p["a"].accessory){const s=v["a"].createAccessory(c);s.services.forEach((t=>{t.parent=e})),t.splice(a,1,...s.services)}else if(i==p["a"].service){let s=v["a"].createService(c,e);t[a]=s}else if(i==p["a"].characteristic){let s=v["a"].createCharacteristic(c,e);t[a]=s}else ve["default"].error("Wrong homekit type: "+i);const r=C(f(s));null!=(null===r||void 0===r?void 0:r.title)&&this.$q.notify(m["Notifications"].qNotificationHtmlObj(m["Notifications"].notificationHtmlMsg(r))),this.setChildren({object:e,children:t})}},setKids(e,t){const a=t.findIndex((e=>"homekitType"in e&&"homekitItem"in e));if(-1==a){for(const a of t)a.parent=e;this.setChildren({object:e,children:t})}else this.addDroppedAdkItem(e,t,a)},...Object(c["mapActions"])("App",["setChildren","setSelectedItem"])}},Oe=Ie,Te=a("58a8"),qe=Object(q["a"])(Oe,F,z,!1,null,null,null),xe=qe.exports;B()(qe,"components",{QIcon:E["a"],QBadge:Te["a"],QTooltip:N["a"],QSeparator:R["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column q-gutter-md"},[a("q-card",{staticClass:"card-selected",attrs:{"data-cy":"card-"+e.HOMEKIT_TYPES.accessory}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:e.ICONS[e.HOMEKIT_TYPES.accessory].name,color:e.ICONS[e.HOMEKIT_TYPES.accessory].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[e._v("\n          "+e._s(e.accessory.visibleName)+"\n        ")]),a("em",{staticClass:"text-capitalize card-subtitle"},[e._v("\n          "+e._s(e.HOMEKIT_TYPES.accessory)+"\n        ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(t){return e.goToMarkdownId("accessory")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("VInput",e._b({staticClass:"col-6",attrs:{label:"Name","data-cy":"input-name","validation-messages":e.nameValMsgs},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Accessory ID",type:"number","data-cy":"input-aid","validation-messages":e.aidValMsgs},model:{value:e.aid,callback:function(t){e.aid=e._n(t)},expression:"aid"}},"VInput",e.INPUT_PROPS,!1)),a("div",{staticClass:"col-6 row"},[a("q-select",e._b({staticClass:"col-9",attrs:{options:e.accessoryCategoryOptions,"option-label":e.accessoryCategoryOptionLabel,"options-dense":"","stack-label":"",label:"Category","data-cy":"input-category"},model:{value:e.category,callback:function(t){e.category=e._n(t)},expression:"category"}},"q-select",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"q-ml-md col",attrs:{label:"Category ID",type:"number","data-cy":"input-category-id"},model:{value:e.category,callback:function(t){e.category=e._n(t)},expression:"category"}},"VInput",e.INPUT_PROPS,!1))],1),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Product Data","data-cy":"input-product-data","validation-messages":e.productDataValMsgs},model:{value:e.productData,callback:function(t){e.productData=t},expression:"productData"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Manufacturer","data-cy":"input-manufacturer","validation-messages":e.manufacturerValMsgs},model:{value:e.manufacturer,callback:function(t){e.manufacturer=t},expression:"manufacturer"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Model","data-cy":"input-model","validation-messages":e.modelValMsgs},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Serial Number","data-cy":"input-serial-number","validation-messages":e.serialNumberValMsgs},model:{value:e.serialNumber,callback:function(t){e.serialNumber=t},expression:"serialNumber"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Firmware Version","data-cy":"input-firmware-version","validation-messages":e.firmwareVersionValMsgs},model:{value:e.firmwareVersion,callback:function(t){e.firmwareVersion=t},expression:"firmwareVersion"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Hardware Version","data-cy":"input-hardware-version","validation-messages":e.hardwareVersionValMsgs},model:{value:e.hardwareVersion,callback:function(t){e.hardwareVersion=t},expression:"hardwareVersion"}},"VInput",e.INPUT_PROPS,!1))],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-sm"},e._l(e.mergedAccessory.services,(function(e){return a("div",{key:e.vueId,staticClass:"col-grow"},[a("SubHomekitItem",{attrs:{value:e}})],1)})),0)])])])],1)},Ve=[],we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{staticClass:"rounded-borders sub-item-background"},[a("q-item",{staticClass:"rounded-borders q-pr-sm",attrs:{clickable:""},on:{click:function(t){return e.setSelectedItem(e.value)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:e.ICONS[e.value.homekitType].name,color:e.ICONS[e.value.homekitType].color,size:"lg"}})],1),a("q-item-section",[a("q-item-label",[a("strong",[e._v(e._s(e.value.visibleName))]),e.value.id?a("em",[e._v(e._s(" - "+e.value.id))]):e._e()]),a("q-item-label",{staticClass:"q-gutter-xs",attrs:{caption:""}},[a("q-badge",{attrs:{color:"accent"}},[e._v("\n          "+e._s(e.value.type)+"\n        ")]),a("q-badge",{attrs:{color:"secondary"}},[e._v("\n          "+e._s(e.value.iid)+"\n        ")]),null==e.value.sourceFile?a("q-badge",{staticClass:"text-primary",attrs:{color:"transparent"}},[a("q-icon",{staticClass:"q-pr-xs",attrs:{name:"mdi-pencil"}}),e._v("\n          Edit\n        ")],1):e._e()],1)],1)],1),e.value.children&&0!=e.value.children.length?a("q-item",{staticClass:"sub-item-background"},[a("div",{staticClass:"row"},e._l(e.value.children,(function(t){return a("q-chip",{key:t.vueId,staticClass:"chip-background",attrs:{dense:"",clickable:""},on:{click:function(a){return e.setSelectedItem(t)}}},[a("q-avatar",{attrs:{color:e.ICONS[t.homekitType].color,"text-color":"white"}},[e._v("\n          "+e._s(t.homekitType[0].toUpperCase())+"\n        ")]),e._v("\n        "+e._s(t.visibleName)+"\n        "),null==e.value.sourceFile?a("q-badge",{staticClass:"text-primary",attrs:{color:"transparent"}},[a("q-icon",{staticClass:"q-px-sm",attrs:{name:"mdi-pencil"}}),e._v("\n          Edit\n        ")],1):e._e()],1)})),1)]):e._e()],1)},Me=[],Ne={namespaced:!0,data:()=>({ICONS:o,HOMEKIT_TYPES:p["a"]}),props:{value:Object},methods:{...Object(c["mapActions"])("App",["setSelectedItem"])}},Pe=Ne,De=(a("8c48"),a("0170")),je=a("b047"),Ee=a("cb32"),Ae=Object(q["a"])(Pe,we,Me,!1,null,null,null),Re=Ae.exports;function He(e,t){const a={};for(const s of t)a[s]={get(){return this[e][s]},set(t){const a=this[e];this.setValue({object:a,key:s,value:t})}};return a}B()(Ae,"components",{QList:V["a"],QItem:w["a"],QItemSection:M["a"],QIcon:E["a"],QItemLabel:De["a"],QBadge:Te["a"],QChip:je["a"],QAvatar:Ee["a"]});var Qe=a("a132"),Ue=a("0647"),$e={namespaced:!0,components:{VInput:ye["VInput"],SubHomekitItem:Re},data:()=>({HOMEKIT_TYPES:p["a"],INPUT_PROPS:r,ICONS:o,accessoryCategoryOptions:[...Qe["a"].accessoryCategoryMap.keys()]}),computed:{...Object(c["mapGetters"])("App",["accessory","mergedAccessory"]),...He("accessory",Object.keys(v["a"].createAccessory())),aidValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["a"].id])},nameValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["w"].id])},productDataValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["y"].id])},manufacturerValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["p"].id])},modelValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["v"].id])},serialNumberValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["B"].id])},firmwareVersionValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["k"].id])},hardwareVersionValMsgs(){return Object(ge["c"])(this.accessory.validationMessages,[Ue["l"].id])}},methods:{...Object(c["mapActions"])("Markdown",["goToMarkdownId"]),...Object(c["mapActions"])("App",["setValue"]),accessoryCategoryOptionLabel(e){const t=Qe["a"].accessoryCategoryMap.get(e);return void 0!==t?t:"Reserved"}}},Be=$e,Le=a("ddd8"),Ke=Object(q["a"])(Be,Se,Ve,!1,null,null,null),Fe=Ke.exports;B()(Ke,"components",{QCard:D["a"],QIcon:E["a"],QBtn:x["a"],QSelect:Le["a"]});var ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column q-gutter-md"},e._l(this.mergedAccessory.services,(function(t){return a("Service",{key:t.vueId,staticClass:"card",class:{"card-selected":t.vueId==e.selectedItem.vueId},attrs:{id:t.vueId,service:t}})})),1)},Ye=[],Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{attrs:{"data-cy":"card-"+e.HOMEKIT_TYPES.service}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:e.ICONS[e.HOMEKIT_TYPES.service].name,color:e.ICONS[e.HOMEKIT_TYPES.service].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[e._v("\n        "+e._s(e.service.variableName)+"\n      ")]),a("em",{staticClass:"text-capitalize card-subtitle"},[e._v("\n        "+e._s(e.HOMEKIT_TYPES.service)+"\n      ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[e.service.sourceFile?a("q-btn",e._b({staticClass:"q-px-xs q-mr-sm",attrs:{color:"primary",icon:"mdi-pencil",dense:"",label:"Edit","data-cy":"source-file-edit"},on:{click:e.editContributedItem}},"q-btn",e.BUTTON_PROPS,!1)):e._e(),a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(t){return e.goToMarkdownId("service")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("VInput",e._b({staticClass:"col-6",attrs:{label:"Variable Name","data-cy":"input-variable-name","validation-messages":e.variableNameValMsgs},model:{value:e.variableName,callback:function(t){e.variableName=t},expression:"variableName"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Name","data-cy":"input-name","validation-messages":e.nameValMsgs},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},"VInput",e.INPUT_PROPS,!1)),a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"q-pa-sm",attrs:{bordered:"",flat:""}},[a("div",{staticClass:"text-bold text-primary"},[e._v("\n              Type Settings\n            ")]),a("div",{staticClass:"row q-pt-xs q-col-gutter-md"},[a("q-select",e._b({staticClass:"col-6",attrs:{options:e.serviceTypeOptions,"option-label":e.serviceTypeOptionLabel,"options-dense":"","stack-label":"",label:"Service Type Name","data-cy":"input-service-type-select"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},"q-select",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Service Type UUID","data-cy":"input-service-type-text","validation-messages":e.typeUUIDValMsgs},on:{beforeinput:e.hexOnlyInputWithSeparators},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},"VInput",e.INPUT_PROPS,!1))],1)])],1),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Instance ID",type:"number","data-cy":"input-iid","validation-messages":e.iidValMsgs},on:{focus:function(t){e.serviceIidTmp=e.iid},blur:function(){e.maintainLinkedServices({oldVal:e.serviceIidTmp,newVal:e.iid})}},model:{value:e.iid,callback:function(t){e.iid=e._n(t)},expression:"iid"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Debug Description","data-cy":"input-debug-description","validation-messages":e.debugDescriptionValMsgs},model:{value:e.debugDescription,callback:function(t){e.debugDescription=t},expression:"debugDescription"}},"VInput",e.INPUT_PROPS,!1)),a("q-select",e._b({staticClass:"col-6",attrs:{label:"Linked Services",multiple:"","use-chips":"","options-dense":"",options:e.linkableServiceIids,"option-label":e.linkedServiceOptionLabel,"data-cy":"input-linked-services"},model:{value:e.linkedServices,callback:function(t){e.linkedServices=t},expression:"linkedServices"}},"q-select",e.INPUT_PROPS,!1)),a("q-select",e._b({staticClass:"col-6",attrs:{label:"Enabled Properties",multiple:"","use-chips":"","options-dense":"",options:e.servicePropertyOptions,"option-label":e.propertyOptionLabel,"data-cy":"input-properties"},model:{value:e.properties,callback:function(t){e.properties=t},expression:"properties"}},"q-select",e.INPUT_PROPS,!1))],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-sm"},e._l(e.service.characteristics,(function(e){return a("div",{key:e.vueId,staticClass:"col-grow"},[a("SubHomekitItem",{attrs:{value:e}})],1)})),0)]),a("q-dialog",{model:{value:e.saveConfirmDialogOn,callback:function(t){e.saveConfirmDialogOn=t},expression:"saveConfirmDialogOn"}},[a("q-card",[a("q-card-section",{staticClass:"row q-gutter-md"},[a("q-icon",{attrs:{name:"mdi-alert ",color:"warning",size:"md"}}),a("div",[e._v("\n            Before making the contributed item(s) to be editable,"),a("br"),e._v("\n            the actual HomeKit Configuration must be saved.\n            "),a("br"),a("br"),a("strong",[e._v(" Do you want to save it now?")])])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"service-save-pop-up-save",label:"Save",color:"primary"},on:{click:e.saveConfigOpenEditContributionDialog}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"service-save-pop-up-cancel",flat:"",label:"Cancel",color:"primary"}})],1)],1)],1),a("q-dialog",{model:{value:e.editConfirmDialogOn,callback:function(t){e.editConfirmDialogOn=t},expression:"editConfirmDialogOn"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"row q-mx-sm"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"mdi-alert-circle ",color:"negative",size:"md"}}),a("div",{staticClass:"q-mt-xs col"},[a("strong",[e._v("\n                Are you sure you want to edit contributed parameters? ")]),a("br"),a("br"),e._v("\n              If you do so, these items will become part of Your HomeKit\n              Configuration and removed from contribution file(s)."),a("br"),a("br"),e._v("\n              Note: To undo this operation: "),a("br"),a("ul",[a("li",[e._v("remove these item(s) from Your HomeKit Configuration")]),a("li",[e._v("delete the contribution file(s) from hkconf directory")]),a("li",[e._v("force generate the project")])])])],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"service-edit-pop-up-edit",outline:"",label:"Edit",color:"negative"},on:{click:function(t){return e.makeContributionEditable(e.service)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"service-edit-pop-up-cancel",flat:"",label:"Cancel",color:"primary"}})],1)],1)],1)],1)])},We=[],Ze=a("9c30"),Je=a("5ee1"),Xe=a("a883"),et={props:{service:Object},data(){return{HOMEKIT_TYPES:p["a"],ICONS:o,BUTTON_PROPS:l,INPUT_PROPS:{...r,disable:!!this.service.sourceFile},servicePropertyOptions:Object.keys(Ze["g"]),propertyLabelOptions:{primaryService:"Primary Service",hidden:"Hidden","ble.supportsConfiguration":"Ble Supports Configuration"},serviceIidTmp:null,serviceTypeOptions:Qe["a"].serviceUUIDs,saveConfirmDialogOn:!1,editConfirmDialogOn:!1}},computed:{...Object(c["mapGetters"])("App",["serviceIids","mergedAccessory","dirty"]),...Object(c["mapGetters"])("Validation",["instanceIds","variableNames"]),...He("service",Object.keys(v["a"].createService())),linkableServiceIids(){return this.serviceIids.filter((e=>this.service.iid!=e))},serviceVisibleNames(){let e=this.mergedAccessory.services.map((e=>[e.iid,e.visibleName]));return Object.fromEntries(e)},variableNameValMsgs(){return Object(ge["c"])(this.service.validationMessages,[Ue["C"].id,Ue["x"].id])},nameValMsgs(){return Object(ge["c"])(this.service.validationMessages,[Ue["w"].id])},iidValMsgs(){return Object(ge["c"])(this.service.validationMessages,[Ue["j"].id,Ue["i"].id])},typeUUIDValMsgs(){return Object(ge["c"])(this.service.validationMessages,[Ue["m"].id])},debugDescriptionValMsgs(){return Object(ge["c"])(this.service.validationMessages,[Ue["h"].id])}},methods:{hexOnlyInputWithSeparators:Je["a"],...Object(c["mapActions"])("Markdown",["goToMarkdownId"]),...Object(c["mapActions"])("App",["setValue","maintainLinkedServices","makeContributionEditable","setDialogOn"]),linkedServiceOptionLabel(e){return`${e} - ${this.serviceVisibleNames[e]}`},propertyOptionLabel(e){const t=this.propertyLabelOptions[e];return void 0!==t?t:e},serviceTypeOptionLabel(e){var t;const a=null===(t=Qe["a"].serviceMap.get(e))||void 0===t?void 0:t.name;return void 0!==a?a:"Custom"},editContributedItem(){!1===this.dirty?this.editConfirmDialogOn=!0:this.saveConfirmDialogOn=!0},saveConfigOpenEditContributionDialog(){Xe["a"].onSaveEvent(),this.editConfirmDialogOn=!0}},components:{SubHomekitItem:Re,VInput:ye["VInput"]},watch:{saveConfirmDialogOn:function(){this.setDialogOn(this.saveConfirmDialogOn)},editConfirmDialogOn:function(){this.setDialogOn(this.editConfirmDialogOn)}}},tt=et,at=Object(q["a"])(tt,Ge,We,!1,null,null,null),st=at.exports;B()(at,"components",{QCard:D["a"],QIcon:E["a"],QBtn:x["a"],QSelect:Le["a"],QDialog:P["a"],QCardSection:j["a"],QCardActions:A["a"]}),B()(at,"directives",{ClosePopup:U["a"]});var it={namespaced:!0,computed:{...Object(c["mapGetters"])("App",["mergedAccessory","selectedItem"])},components:{Service:st},methods:{renderCompleteEvent(){this.$nextTick((()=>{te(this.selectedItem,p["a"].service)}))}},watch:{selectedItem:function(){this.renderCompleteEvent()}},created(){this.renderCompleteEvent()}},ct=it,rt=Object(q["a"])(ct,ze,Ye,!1,null,null,null),nt=rt.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column q-gutter-md"},e._l(this.selectedItem.parent.characteristics,(function(t){return a("Characteristic",{key:t.vueId,staticClass:"card",class:{"card-selected":t.vueId==e.selectedItem.vueId},attrs:{id:t.vueId,characteristic:t}})})),1)},ot=[],dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{attrs:{"data-cy":"card-"+e.HOMEKIT_TYPES.characteristic}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:e.ICONS[e.HOMEKIT_TYPES.characteristic].name,color:e.ICONS[e.HOMEKIT_TYPES.characteristic].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[e._v("\n        "+e._s(e.characteristic.variableName)+"\n      ")]),a("em",{staticClass:"text-capitalize card-subtitle"},[e._v("\n        "+e._s(e.HOMEKIT_TYPES.characteristic)+"\n      ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(t){return e.goToMarkdownId("characteristic")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("VInput",e._b({staticClass:"col-6",attrs:{label:"Variable Name","data-cy":"input-variable-name","validation-messages":e.variablNameValMsgs},model:{value:e.variableName,callback:function(t){e.variableName=t},expression:"variableName"}},"VInput",e.INPUT_PROPS,!1)),a("q-select",e._b({staticClass:"col-6",attrs:{label:"Format","options-dense":"",options:e.characteristicFormatOptions,"data-cy":"input-format"},on:{input:function(){e.maintainFormatSpecificInputs()}},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}},"q-select",e.INPUT_PROPS,!1)),a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"q-pa-sm",attrs:{bordered:"",flat:""}},[a("div",{staticClass:"text-bold text-primary"},[e._v("Type Settings")]),a("div",{staticClass:"row q-pt-xs q-col-gutter-md"},[a("q-select",e._b({staticClass:"col-6",attrs:{options:e.characteristicTypeOptions,"option-label":e.characteristicTypeOptionLabel,"options-dense":"","stack-label":"",label:"Characteristic Type Name","data-cy":"input-characteristic-type-select"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},"q-select",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Characteristic Type UUID","data-cy":"input-characteristic-type-text","validation-messages":e.typeUUIDValMsgs},on:{beforeinput:e.hexOnlyInputWithSeparators},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},"VInput",e.INPUT_PROPS,!1))],1)])],1),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Instance ID",type:"number","data-cy":"input-iid","validation-messages":e.iidValMsgs},model:{value:e.iid,callback:function(t){e.iid=e._n(t)},expression:"iid"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Debug Description","data-cy":"input-debug-description","validation-messages":e.debugDescriptionValMsgs},model:{value:e.debugDescription,callback:function(t){e.debugDescription=t},expression:"debugDescription"}},"VInput",e.INPUT_PROPS,!1)),a("VInput",e._b({staticClass:"col-6",attrs:{label:"Manufacturer Description","data-cy":"input-manufacturer-description","validation-messages":e.manufacturerDescriptionValMsgs},model:{value:e.manufacturerDescription,callback:function(t){e.manufacturerDescription=t},expression:"manufacturerDescription"}},"VInput",e.INPUT_PROPS,!1)),a("div",{staticClass:"col-6"},[e.enableUnit?a("q-select",e._b({attrs:{label:"Unit","options-dense":"",options:e.characteristicUnitOptions,"data-cy":"input-unit"},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}},"q-select",e.INPUT_PROPS,!1)):e._e()],1),a("VSelect",e._b({staticClass:"col-6",attrs:{label:"Enabled Properties",multiple:"","use-chips":"","options-dense":"",options:e.characteristicPropertyOptions,"option-label":e.propertyOptionLabel,"data-cy":"input-properties","validation-messages":e.enabledPropertiesValidationMessages},on:{input:e.addCallbackTypeAutomatically},model:{value:e.properties,callback:function(t){e.properties=t},expression:"properties"}},"VSelect",e.INPUT_PROPS,!1))],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.characteristic.constraints,expression:"characteristic.constraints"}],staticClass:"col-grow"},[a("ConstraintsTable",{ref:"constraints-table",attrs:{characteristic:e.characteristic}})],1),a("div",{staticClass:"col-grow"},[a("EventHandlerCallbacksTable",{ref:"callbacks-table",attrs:{characteristic:e.characteristic}})],1),a("div",{staticClass:"col-grow"},[a("ContextCallbacksTable",{directives:[{name:"show",rawName:"v-show",value:e.enableContextCallbacks,expression:"enableContextCallbacks"}],ref:"context-callbacks-table",attrs:{characteristic:e.characteristic}})],1)])])},ut=[],pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericCallbacksTable",{ref:"child-generic-callbacks-table",attrs:{characteristic:e.characteristic,title:"Event Handler Callbacks",callbackTypeNames:e.callbackTypeNames,subscribedValidationMessageIds:e.subscribedValidationMessageIds,storeKey:"callbacks","data-cy":"callback-table"}})},mt=[],vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-markup-table",{class:{"alert-error-border":"error"==e.callbackValidationMessages.type,"alert-warning-border":"warning"==e.callbackValidationMessages.type},attrs:{flat:"",bordered:"",dense:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-h6",staticStyle:{height:"43px"},attrs:{colspan:"2",scope:"colgroup"}},[a("div",{staticClass:"row items-center"},[a("span",[e._v(e._s(e.title))]),a("div",{staticClass:"col"}),e.availableNewCallbackTypes.length>0?a("q-btn",e._b({attrs:{round:!1,"no-caps":"",color:"primary","data-cy":"add-callback"}},"q-btn",e.ICON_BUTTON_PROPS,!1),[a("q-icon",{attrs:{name:"mdi-plus-thick",size:"xs"}}),a("span",{staticStyle:{"margin-top":"2px"}},[e._v("Add")]),a("q-menu",[a("q-list",e._l(e.availableNewCallbackTypes,(function(t,s){return a("q-item",{key:s,staticStyle:{"min-width":"100px"},attrs:{dense:"",clickable:"","data-cy":"callback-add-btn-"+t},on:{click:function(a){return e.initializeCallbackType(t)}}},[a("q-item-section",[e._v(e._s(e.callbackTypeNames[t]))])],1)})),1)],1)],1):e._e(),e.callbackValidationMessages.messages.length>0?a("ValidationMarker",{attrs:{type:e.callbackValidationMessages.type,messages:e.callbackValidationMessages.messages,"data-cy":"validation-marker-message"}}):e._e()],1)])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!e.definedCallbacks,expression:"!!definedCallbacks"}]},[a("th",{staticClass:"text-left",attrs:{scope:"col"}},[e._v("Type")]),a("th",{staticClass:"text-left",attrs:{scope:"col"}},[e._v("Function Name")])])]),e.definedCallbacks?a("tbody",e._l(e.definedCallbacks,(function(t,s){return a("CallbacksTableRow",{key:s,attrs:{callbacks:e.callbacks,callbackType:t,callbackTypeName:e.callbackTypeNames[t],disable:!!e.sourceFile,"data-cy":"callback-table-row"}})})),1):e._e()])},bt=[],ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"text-left"},[e._v("\n    "+e._s(e.callbackTypeName)+"\n  ")]),a("td",{attrs:{"auto-width":""}},[a("div",{staticClass:"row items-center"},[a("FreeStyleInput",{staticClass:"col",attrs:{disabled:e.disable,comfortZone:10,minWidth:"200px"},on:{input:function(t){e.active=!0}},model:{value:e.callbackFunctionName,callback:function(t){e.callbackFunctionName=t},expression:"callbackFunctionName"}}),a("q-btn",e._b({attrs:{"data-cy":"remove-callback",icon:"mdi-delete",disable:e.disable},on:{click:e.deleteCallback}},"q-btn",e.ICON_BUTTON_PROPS,!1))],1)])])},yt=[],gt={props:{callbacks:{type:Object,required:!0},callbackType:{type:String,required:!0},callbackTypeName:{type:String,required:!0},disable:Boolean},data(){return{ICON_BUTTON_PROPS:{...n,disable:this.disable}}},components:{FreeStyleInput:ye["FreeStyleInput"]},computed:{callbackFunctionName:{get(){return this.callbacks[this.callbackType]},set(e){let t=(null===e||void 0===e?void 0:e.length)>0?e:null;this.setValue({object:this.callbacks,key:this.callbackType,value:t})}}},methods:{...Object(c["mapActions"])("App",["setValue"]),deleteCallback(){this.setValue({object:this.callbacks,key:this.callbackType,value:void 0})}}},ft=gt,Ct=Object(q["a"])(ft,ht,yt,!1,null,null,null),kt=Ct.exports;B()(Ct,"components",{QBtn:x["a"]});var _t={props:{characteristic:{type:Object,required:!0},title:{type:String,required:!0},callbackTypeNames:{type:Object,required:!0},subscribedValidationMessageIds:{type:Array,required:!0},storeKey:{type:String,required:!0}},data(){return{ICON_BUTTON_PROPS:{...n,disable:!!this.characteristic.sourceFile},HOMEKIT_TYPES:p["a"]}},components:{CallbacksTableRow:kt,ValidationMarker:ye["ValidationMarker"]},computed:{sourceFile(){return this.characteristic.sourceFile},callbacks(){var e;return null===(e=this.characteristic)||void 0===e?void 0:e[this.storeKey]},definedCallbacks(){return this.callbacks?Object.keys(this.callbacks).filter((e=>void 0!==this.callbacks[e])):[]},availableNewCallbackTypes(){let e=this.definedCallbacks,t=Object.keys(this.callbackTypeNames);return t.filter((t=>!e.includes(t)))},callbackValidationMessages(){return Object(ge["c"])(this.characteristic.validationMessages,this.subscribedValidationMessageIds)}},methods:{...Object(c["mapActions"])("App",["setValue"]),initializeCallbackType(e){let t={...this.callbacks,[e]:null};this.setValue({object:this.characteristic,key:this.storeKey,value:t})}}},It=_t,Ot=a("2bb1"),Tt=Object(q["a"])(It,vt,bt,!1,null,null,null),qt=Tt.exports;B()(Tt,"components",{QMarkupTable:Ot["a"],QBtn:x["a"],QIcon:E["a"],QMenu:S["a"],QList:V["a"],QItem:w["a"],QItemSection:M["a"]});var xt={props:{characteristic:{type:Object,required:!0}},data(){return{callbackTypeNames:{handleRead:"Handle Read",handleWrite:"Handle Write",handleSubscribe:"Handle Subscribe",handleUnsubscribe:"Handle Unsubscribe"},subscribedValidationMessageIds:[Ue["b"].id,Ue["c"].id,Ue["s"].id,Ue["u"].id]}},components:{GenericCallbacksTable:qt},methods:{initializeCallbackType(e){this.$refs["child-generic-callbacks-table"].initializeCallbackType(e)}}},St=xt,Vt=Object(q["a"])(St,pt,mt,!1,null,null,null),wt=Vt.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericCallbacksTable",{ref:"child-generic-callbacks-table",attrs:{characteristic:e.characteristic,title:"Event Notification Context Information Callbacks",callbackTypeNames:e.callbackTypeNames,subscribedValidationMessageIds:e.subscribedValidationMessageIds,storeKey:e.CONTEXT_CALLBACKS_STORE_KEY,"data-cy":"context-callback-table"}})},Nt=[];const Pt="contextCallbacks";var Dt={props:{characteristic:{type:Object,required:!0}},data(){return{CONTEXT_CALLBACKS_STORE_KEY:Pt,callbackTypeNames:{handleReadContextData:"Handle Read Context Data",handleReadContextDataCompact:"Compact Handle Read Context Data"},subscribedValidationMessageIds:[Ue["d"].id,Ue["e"].id,Ue["r"].id]}},components:{GenericCallbacksTable:qt},methods:{...Object(c["mapActions"])("App",["setValue"]),initializeCallbackType(e){this.characteristic.format===Ze["c"].uint8&&this.$refs["child-generic-callbacks-table"].initializeCallbackType(e)},maintainDefinedCallbacksByFormat(){this.characteristic.format!==Ze["c"].uint8&&this.setValue({object:this.characteristic,key:Pt,value:void 0})}}},jt=Dt,Et=Object(q["a"])(jt,Mt,Nt,!1,null,null,null),At=Et.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-markup-table",{class:{"alert-error-border":"error"==e.constraintsValidationMessages.type,"alert-warning-border":"warning"==e.constraintsValidationMessages.type},attrs:{"data-cy":"constraints-table",flat:"",bordered:"",dense:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-h6",staticStyle:{height:"43px"},attrs:{colspan:"2",scope:"colgroup"}},[a("div",{staticClass:"row items-center",attrs:{"data-cy":"constraints"}},[a("span",[e._v("Constraints")]),a("div",{staticClass:"col"}),e.availableNewConstraintTypes.length>0?a("q-btn",e._b({attrs:{round:!1,"no-caps":"",color:"primary","data-cy":"add-constraint"}},"q-btn",e.ICON_BUTTON_PROPS,!1),[a("q-icon",{attrs:{name:"mdi-plus-thick",size:"xs"}}),a("span",{staticStyle:{"margin-top":"2px"}},[e._v("Add")]),a("q-menu",[a("q-list",e._l(e.availableNewConstraintTypes,(function(t,s){return a("q-item",{key:s,staticStyle:{"min-width":"100px"},attrs:{dense:"",clickable:"","data-cy":"constraint-add-btn-"+t},on:{click:function(a){return e.initializeConstraintType(t)}}},[a("q-item-section",[e._v(e._s(e.constraintTypeNames[t]))])],1)})),1)],1)],1):e._e(),e.constraintsValidationMessages.messages.length>0?a("ValidationMarker",{attrs:{type:e.constraintsValidationMessages.type,messages:e.constraintsValidationMessages.messages,"data-cy":"validation-marker"}}):e._e()],1)])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!e.definedConstraints,expression:"!!definedConstraints"}]},[a("th",{staticClass:"text-left",attrs:{scope:"col"}},[e._v("Type")]),a("th",{staticClass:"text-left",attrs:{scope:"col"}},[e._v("Value")])])]),e.definedConstraints?a("tbody",e._l(e.definedConstraints,(function(t,s){return a("ConstraintsTableRow",{key:s,attrs:{constraints:e.constraints,constraintType:t,constraintTypeName:e.constraintTypeNames[t],disable:!!e.sourceFile,"data-cy":"constraint-table"}})})),1):e._e()])},Ht=[],Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"text-left"},[e._v("\n    "+e._s(e.constraintTypeName)+"\n  ")]),a("td",{staticStyle:{height:"42px"},attrs:{"auto-width":""}},[a("div",{staticClass:"row items-center"},["validValues"===e.constraintType?[a("ConstraintValuesInput",{staticClass:"col",attrs:{disabled:e.disable,constraints:e.constraints},on:{change:e.setValue}})]:"validValuesRanges"===e.constraintType?[a("ConstraintRangesInput",{staticClass:"col",attrs:{disabled:e.disable,constraints:e.constraints},on:{change:e.setValue}})]:[a("FreeStyleInput",{staticClass:"col",attrs:{disabled:e.disable,comfortZone:10,minWidth:"200px",type:"number"},model:{value:e.constraint,callback:function(t){e.constraint=e._n(t)},expression:"constraint"}})],"validValues"===e.constraintType||"validValuesRanges"===e.constraintType?a("q-btn",e._b({attrs:{icon:"mdi-delete",disable:e.disable,"data-cy":"button"},on:{click:function(t){e.constraint=void 0}}},"q-btn",e.ICON_BUTTON_PROPS,!1)):e._e()],2)])])},Ut=[],$t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ConstraintInput",e._b({attrs:{disabled:e.disabled,validationMessages:e.validationMessages},model:{value:e.validValuesText,callback:function(t){e.validValuesText=t},expression:"validValuesText"}},"ConstraintInput",e.$attrs,!1))},Bt=[],Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._b({staticClass:"row"},"div",e.$attrs,!1),[a("FreeStyleInput",{staticClass:"col",attrs:{disabled:e.disabled,value:e.value,comfortZone:10,minWidth:"200px"},on:{input:e.onChange}}),e.validationMessages.length>0?a("ValidationMarker",{attrs:{type:"error",messages:e.validationMessages}}):e._e()],1)},Kt=[],Ft={components:{FreeStyleInput:ye["FreeStyleInput"],ValidationMarker:ye["ValidationMarker"]},name:"ConstraintInput",props:{validationMessages:{type:Array,defaut:[]},value:String,disabled:{type:Boolean,default:!1}},methods:{onChange(e){this.$emit("input",e)}}},zt=Ft,Yt=Object(q["a"])(zt,Lt,Kt,!1,null,null,null),Gt=Yt.exports,Wt={components:{ConstraintInput:Gt},name:"ConstraintValuesInput",props:{constraints:Object,disabled:{type:Boolean,default:!1}},data:()=>({validationMessages:[],validValuesText:null}),mounted(){const{constraints:e}=this;this.validValuesText=e&&e.validValues?e.validValues.join(","):""},methods:{validateForDependencies(e){const{constraints:t}=this;for(const a of e){const e=+a;e<t.minimumValue?this.validationMessages.push(`${e} is invalid value. The smallest value could be ${t.minimumValue}`):e>t.maximumValue&&this.validationMessages.push(`${e} is invalid value. The largest value could be ${t.maximumValue}`),e%t.stepValue!==0&&this.validationMessages.push(`${e} is invalid value because it isn't fit step value ${t.stepValue}`)}},validateValue(e){0!==e.length&&(this.validationMessages.splice(0),this.validateForDependencies(this.constraints.validValues))}},watch:{"constraints.minimumValue"(e){this.validateValue(e)},"constraints.maximumValue"(e){this.validateValue(e)},"constraints.stepValue"(e){this.validateValue(e)},validValuesText(e){this.validationMessages.splice(0);const t=null!==e.match(/^[\d\s]+(,[\d\s]+)*$/);t?this.validateForDependencies(e.split(",")):this.validationMessages.push("Invalid values, comma separated unsigned integer values are accepted. E.g.: 1,2,3");const a=e.length>0?e.split(",").map((e=>parseInt(e))):"";this.$emit("change",{object:this.constraints,key:"validValues",value:a})}}},Zt=Wt,Jt=(a("9b81"),Object(q["a"])(Zt,$t,Bt,!1,null,"bcde3b1e",null)),Xt=Jt.exports,ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ConstraintInput",e._b({attrs:{disabled:e.disabled,validationMessages:e.validationMessages},model:{value:e.validValuesRangesText,callback:function(t){e.validValuesRangesText=t},expression:"validValuesRangesText"}},"ConstraintInput",e.$attrs,!1))},ta=[],aa={components:{ConstraintInput:Gt},name:"ConstraintRangesInput",props:{constraints:Object,disabled:{type:Boolean,default:!1}},mounted(){const{constraints:e}=this;this.validValuesRangesText=e&&e.validValuesRanges?e.validValuesRanges.map((e=>e.join("-"))).join(","):""},data:()=>({validationMessages:[],validValuesRangesText:null}),methods:{validateForDependencies(e){const{constraints:t}=this;for(const a of e)(a[0]>a[1]||a[0]===a[1])&&this.validationMessages.push(`Invalid range [${a}]. Lower range should be smaller than upper range`),a[0]<t.minimumValue||a[0]>t.maximumValue?this.validationMessages.push(`Invalid range [${a}]. Lower range couldn't smaller than ${t.minimumValue} or greater than ${t.maximumValue}`):(a[1]<t.minimumValue||a[1]>t.maximumValue)&&this.validationMessages.push(`Invalid range [${a}]. Upper range couldn't smaller than ${t.minimumValue} or greater than ${t.maximumValue}`),a[0]%t.stepValue!==0?this.validationMessages.push(`Invalid range ${a}. Lower range ${a[0]} don't fits step: ${t.stepValue}`):a[1]%t.stepValue!==0&&this.validationMessages.push(`Invalid range ${a}. Upper range ${a[1]} don't fits step: ${t.stepValue}`)},validateValue(e){0!==e.length&&(this.validationMessages.splice(0),this.validateForDependencies(this.constraints.validValuesRanges))}},watch:{"constraints.minimumValue"(e){this.validateValue(e)},"constraints.maximumValue"(e){this.validateValue(e)},"constraints.stepValue"(e){this.validateValue(e)},validValuesRangesText(e){this.validationMessages.splice(0);const t=null!==e.match(/^[\d\s]+-[\d\s]+(,[\d\s]+-[\d\s]+)*$/);t?(this.validationMessages.splice(0),this.validateForDependencies(e.split(",").map((e=>e.split("-"))))):this.validationMessages.push("Invalid range, accepted format is: 1-2,3-4");const a=e.split(",").map((e=>e.split("-").map((e=>parseInt(e)))));this.$emit("change",{object:this.constraints,key:"validValuesRanges",value:a})}}},sa=aa,ia=Object(q["a"])(sa,ea,ta,!1,null,null,null),ca=ia.exports,ra={props:{constraints:{type:Object,required:!0},constraintType:{type:String,required:!0},constraintTypeName:{type:String,required:!0},disable:Boolean},data(){return{ICON_BUTTON_PROPS:{...n,disable:this.disable}}},components:{FreeStyleInput:ye["FreeStyleInput"],ConstraintValuesInput:Xt,ConstraintRangesInput:ca},computed:{constraint:{get(){return this.constraints[this.constraintType]},set(e){""===e&&(e=null),this.setValue({object:this.constraints,key:this.constraintType,value:e})}}},methods:{...Object(c["mapActions"])("App",["setValue"])}},na=ra,la=Object(q["a"])(na,Qt,Ut,!1,null,null,null),oa=la.exports;B()(la,"components",{QBtn:x["a"]});var da={props:{characteristic:{type:Object,required:!0}},data(){return{ICON_BUTTON_PROPS:{...n,disable:!!this.characteristic.sourceFile},HOMEKIT_TYPES:p["a"],formatConstraintsMap:Ze["h"],constraintTypeNames:{maxLength:"Maximum Length",minimumValue:"Minimum Value",maximumValue:"Maximum Value",stepValue:"Step Value",validValues:"Valid Values",validValuesRanges:"Valid Values Ranges"}}},components:{ConstraintsTableRow:oa,ValidationMarker:ye["ValidationMarker"]},computed:{sourceFile(){return this.characteristic.sourceFile},constraints(){var e;return null===(e=this.characteristic)||void 0===e?void 0:e.constraints},definedConstraints(){return this.constraints?Object.keys(this.constraints).filter((e=>void 0!==this.constraints[e])):[]},formatSpecificConstraints(){let e=this.formatConstraintsMap[this.characteristic.format];return null!==e&&void 0!==e&&e.constraints?Object.keys(null===e||void 0===e?void 0:e.constraints):[]},availableNewConstraintTypes(){return this.formatSpecificConstraints.filter((e=>!this.definedConstraints.includes(e)))},constraintsValidationMessages(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["t"].id,Ue["q"].id,Ue["n"].id])}},methods:{...Object(c["mapActions"])("App",["setValue"]),initializeConstraintType(e){let t={...this.constraints,[e]:null};this.setValue({object:this.characteristic,key:"constraints",value:t})},maintainDefinedConstraintsByFormat(){0==this.formatSpecificConstraints.length?this.setValue({object:this.characteristic,key:"constraints",value:void 0}):(this.formatSpecificConstraints.forEach((e=>{var t;this.definedConstraints.includes(e)||void 0!==(null===(t=this.formatConstraintsMap[this.characteristic.format])||void 0===t?void 0:t.constraints[e])&&this.initializeConstraintType(e)})),this.definedConstraints.forEach((e=>{this.formatSpecificConstraints.includes(e)||this.setValue({object:this.constraints,key:e,value:void 0})})))}}},ua=da,pa=Object(q["a"])(ua,Rt,Ht,!1,null,null,null),ma=pa.exports;B()(pa,"components",{QMarkupTable:Ot["a"],QBtn:x["a"],QIcon:E["a"],QMenu:S["a"],QList:V["a"],QItem:w["a"],QItemSection:M["a"]});var va={components:{VInput:ye["VInput"],EventHandlerCallbacksTable:wt,ContextCallbacksTable:At,ConstraintsTable:ma,VSelect:ye["VSelect"]},props:{characteristic:Object},data(){return{HOMEKIT_TYPES:p["a"],ICONS:o,INPUT_PROPS:{...r,disable:!!this.characteristic.sourceFile},previousProperty:this.characteristic.properties,characteristicFormatOptions:Object.keys(Ze["c"]),characteristicUnitOptions:Object.keys(Ze["d"]),formatConstraintsMap:Ze["h"],characteristicTypeOptions:Qe["a"].characteristicUUIDs}},computed:{...Object(c["mapGetters"])("Validation",["instanceIds","variableNames"]),...Object(c["mapGetters"])("VersionManager",{characteristicPropertyOptions:"characteristicPropertyIds",characteristicPropertyLabels:"characteristicPropertyLabels"}),...He("characteristic",Object.keys(v["a"].createCharacteristic())),enableUnit(){const e=this.characteristic.format;return!(e===Ze["c"].bool||e===Ze["c"].tlv8||e===Ze["c"].data||e===Ze["c"].string)},enableContextCallbacks(){const e=this.characteristic.format;return e===Ze["c"].uint8},variablNameValMsgs(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["C"].id,Ue["x"].id])},iidValMsgs(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["j"].id,Ue["i"].id])},typeUUIDValMsgs(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["m"].id])},enabledPropertiesValidationMessages(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["A"].id,Ue["D"].id,Ue["z"].id,Ue["f"].id,Ue["g"].id])},debugDescriptionValMsgs(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["h"].id])},manufacturerDescriptionValMsgs(){return Object(ge["c"])(this.characteristic.validationMessages,[Ue["o"].id])}},methods:{...Object(c["mapActions"])("Markdown",["goToMarkdownId"]),hexOnlyInputWithSeparators:Je["a"],...Object(c["mapActions"])("App",["setValue"]),maintainFormatSpecificInputs(){0==this.enableUnit&&(this.unit=void 0),this.$refs["constraints-table"].maintainDefinedConstraintsByFormat(),this.$refs["context-callbacks-table"].maintainDefinedCallbacksByFormat()},propertyOptionLabel(e){const t=this.characteristicPropertyLabels[e];return void 0!==t?t:e},characteristicTypeOptionLabel(e){var t;const a=null===(t=Qe["a"].characteristicMap.get(e))||void 0===t?void 0:t.name;return void 0!==a?a:"Custom"},addCallbackTypeAutomatically(e){var t,a,s;e.includes("readable")&&!this.previousProperty.includes("readable")&&void 0===(null===(t=this.characteristic.callbacks)||void 0===t?void 0:t.handleRead)&&this.$refs["callbacks-table"].initializeCallbackType("handleRead"),e.includes("writable")&&!this.previousProperty.includes("writable")&&void 0===(null===(a=this.characteristic.callbacks)||void 0===a?void 0:a.handleWrite)&&this.$refs["callbacks-table"].initializeCallbackType("handleWrite"),e.includes("supportsEventNotificationContextInformation")&&!this.previousProperty.includes("supportsEventNotificationContextInformation")&&void 0===(null===(s=this.characteristic.contextCallbacks)||void 0===s?void 0:s.handleReadContextData)&&this.$refs["context-callbacks-table"].initializeCallbackType("handleReadContextData"),this.previousProperty=e}}},ba=va,ha=Object(q["a"])(ba,dt,ut,!1,null,null,null),ya=ha.exports;B()(ha,"components",{QCard:D["a"],QIcon:E["a"],QBtn:x["a"],QSelect:Le["a"]});var ga={namespaced:!0,computed:{...Object(c["mapGetters"])("App",["selectedItem"])},components:{Characteristic:ya},methods:{renderCompleteEvent(){this.$nextTick((()=>{te(this.selectedItem,p["a"].characteristic)}))}},watch:{selectedItem:function(){this.renderCompleteEvent()}},created(){this.renderCompleteEvent()}},fa=ga,Ca=Object(q["a"])(fa,lt,ot,!1,null,null,null),ka=Ca.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.adkLayoutOn?a("div",{staticClass:"column q-pl-md adk-elements-title"},[a("div",{staticClass:"gt-sm adk-elements-title-main",attrs:{"data-cy":"adk-elements-title-main"}},[e._v("\n    Add Standard Homekit Services and Characteristics\n  ")]),a("div",{staticClass:"gt-md adk-elements-title-details"},[e._v("\n    Drag and drop services and characteristics from the right side panel to\n    the actual Accessory\n  ")])]):a("div",{staticClass:"row text-grey-7 items-center q-px-md no-wrap"},e._l(e.pathElements,(function(t,s){return a("div",{key:s,staticClass:"gt-sm row items-center no-wrap"},[s>0?a("q-icon",{staticClass:"items-center q-pa-sm",attrs:{name:"chevron_right",size:"sm"}}):e._e(),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"items-center q-pa-sm",attrs:{clickable:""},on:{click:function(){e.setSelectedItem(e.itemByVueId(t.vueId))}}},[a("q-icon",{staticClass:"q-pr-sm",attrs:{name:t.icon,color:t.color,size:"sm"}}),e._v("\n      "+e._s(t.name)+"\n    ")],1)],1)})),0)},Ia=[],Oa={data:()=>({ICONS:o}),computed:{...Object(c["mapGetters"])("App",["accessory","selectedItem","itemByVueId","adkLayoutOn"]),adkLayout(){return!1},pathElements(){let e=[],t=this.selectedItem;while(null!=t["parent"])t=t.parent,e.unshift({name:t.visibleName,icon:o[t.homekitType].name,color:o[t.homekitType].color,vueId:t.vueId});return e}},methods:{...Object(c["mapActions"])("App",["setSelectedItem"])}},Ta=Oa,qa=a("714f"),xa=Object(q["a"])(Ta,_a,Ia,!1,null,null,null),Sa=xa.exports;B()(xa,"components",{QIcon:E["a"],QItem:w["a"]}),B()(xa,"directives",{Ripple:qa["a"]});var Va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col row"},[a("div",{staticStyle:{width:"400px"}},[a("q-card",{staticClass:"full-height column"},[a("q-btn-toggle",{attrs:{ripple:!1,"no-caps":"",options:e.tabOptions,spread:"","toggle-text-color":"toggle-color","data-cy":"tab-options"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),a("q-separator",{staticStyle:{height:"1px"}}),a("div",{staticClass:"col-auto"},[a("q-input",{ref:"filter",staticClass:"q-px-sm",attrs:{borderless:"",dense:"",placeholder:"Filter",debounce:"500","data-cy":"filter"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"mdi-filter-variant"}})]},proxy:!0}]),model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),a("q-separator",{staticStyle:{height:"1px"}}),a("div",{staticClass:"col",attrs:{"data-cy":"drag-tree-adk"}},[a("q-scroll-area",{staticClass:"fit"},e._l(e.HOMEKIT_TYPES,(function(t){return a("DragTree",{directives:[{name:"show",rawName:"v-show",value:t==e.tab,expression:"type == tab"}],key:t,attrs:{value:e.adkTree[t],"node-key":"vueId","read-only":"",groups:e.groups[t],"drag-options":{sort:!1,clone:e.clone},selected:e.selected},scopedSlots:e._u([{key:"label",fn:function(t){var s=t.node;return[a("div",{staticClass:"row sig-item q-pr-md"},[a("HomekitTreeItem",{staticClass:"cursor-pointer col",attrs:{value:s},on:{click:function(t){return e.selected=t}}}),a("q-btn",{staticClass:"sig-add",attrs:{"data-cy":"service-icon-button",dense:"",flat:"",icon:"mdi-plus-thick",color:"primary",size:"sm"},on:{click:function(t){return e.addSigItem(s)}}})],1)]}}],null,!0)})})),1)],1)],1)],1),a("div",{staticClass:"q-ml-md col"},[a("q-card",{staticClass:"column full-height"},[null!=e.selected?[a("div",{staticClass:"row items-center q-py-md q-gutter-x-sm sig-info-title-block"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"sig-info-title-block-bar"})]),a("q-icon",{attrs:{name:e.ICONS[e.selected.homekitType].name,color:e.ICONS[e.selected.homekitType].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[e._v("\n              "+e._s(e.selected.visibleName)+"\n            ")]),a("em",{staticClass:"text-capitalize card-subtitle"},[e._v("\n              "+e._s(e.selected.homekitType)+"\n            ")])]),a("div",{staticClass:"col"}),a("div",{staticClass:"q-ml-lg",attrs:{"data-cy":"adk-layout-type"}},[a("strong",[e._v("Type: ")]),a("span",{staticClass:"q-mr-sm",staticStyle:{"overflow-wrap":"break-word","word-wrap":"break-word"}},[e._v("\n              "+e._s(e.selected.type)+"\n            ")])])],1),a("div",[a("q-separator")],1),a("div",{staticClass:"col"},[a("q-scroll-area",{staticClass:"fit"},[a("div",{staticClass:"q-pa-sm"},[e.selected.homekitType==e.HOMEKIT_TYPES.service?a("AdkServiceDescription",{attrs:{homekitItem:e.selected}}):e.selected.homekitType==e.HOMEKIT_TYPES.characteristic?a("AdkCharacteristicDescription",{attrs:{homekitItem:e.selected}}):e._e()],1)])],1)]:e._e()],2)],1)])},wa=[],Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-cy":"service-description"}},[a("div",{staticClass:"q-pa-sm q-gutter-sm"},[e._m(0),a("div",{staticClass:"descriptionContainer",domProps:{innerHTML:e._s(e.getServiceDescription(e.homekitItem.type))}}),e.homekitItem.requiredCharacteristics.length>0?a("div",{staticClass:"text-grey card-title"},[a("span",{staticClass:"adk-chapter-title",attrs:{"data-cy":"required-characteristics"}},[e._v("Required Characteristics")])]):e._e(),a("div",{staticClass:"row"},e._l(e.homekitItem.requiredCharacteristics,(function(t,s){return a("q-card",{key:s,staticClass:"q-ma-xs q-pa-xs",attrs:{bordered:"",flat:""}},[a("div",{staticClass:"row items-center"},[a("q-icon",{attrs:{name:e.ICONS[t.homekitType].name,color:e.ICONS[t.homekitType].color,size:"md"}}),a("strong",{staticClass:"q-ml-xs"},[e._v(e._s(t.visibleName))])],1),a("div",{staticClass:"q-ma-sm descriptionContainer",domProps:{innerHTML:e._s(e.getCharacteristicDescription(t.type))}}),a("div",{staticClass:"q-ma-sm row"},[a("AdkCharacteristicDataTable",{attrs:{homekitItem:t}})],1)])})),1),e.homekitItem.optionalCharacteristics.length>0?a("div",{staticClass:"text-primary card-title"},[a("span",{staticClass:"adk-chapter-title",attrs:{"data-cy":"optional-characteristics"}},[e._v("Optional Characteristics")])]):e._e(),a("div",{staticClass:"row"},e._l(e.homekitItem.optionalCharacteristics,(function(t,s){return a("q-card",{key:s,staticClass:"q-ma-xs q-pa-xs",attrs:{bordered:"",flat:""}},[a("div",{staticClass:"row items-center"},[a("q-icon",{attrs:{name:e.ICONS[t.homekitType].name,color:e.ICONS[t.homekitType].color,size:"md"}}),a("strong",{staticClass:"q-ml-xs"},[e._v(e._s(t.visibleName))])],1),a("div",{staticClass:"q-ma-sm descriptionContainer",domProps:{innerHTML:e._s(e.getCharacteristicDescription(t.type))}}),a("div",{staticClass:"q-ma-sm row"},[a("AdkCharacteristicDataTable",{attrs:{homekitItem:t}})],1)])})),1)])])},Na=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-grey card-title"},[a("span",{staticClass:"adk-chapter-title"},[e._v("Description")])])}],Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-markup-table",{attrs:{flat:"",bordered:"",dense:""}},[a("tbody",[a("tr",[a("td",{staticClass:"text-left text-bold"},[e._v("Type")]),a("td",[e._v(e._s(e.homekitItem.type))])]),a("tr",[a("td",{staticClass:"text-left text-bold"},[e._v("Format")]),a("td",[e._v(e._s(e.homekitItem.format))])]),void 0!=e.homekitItem.unit?a("tr",[a("td",{staticClass:"text-left text-bold"},[e._v("Unit")]),a("td",[e._v(e._s(e.homekitItem.unit))])]):e._e(),a("tr",[a("td",{staticClass:"text-left text-bold"},[e._v("Properties")]),a("td",e._l(e.homekitItem.properties,(function(t,s){return a("div",{key:s},[e._v("\n          "+e._s(t)+e._s(e.propertyDocName(t))+"\n        ")])})),0)]),e.showConstraints?a("tr",[a("td",{staticClass:"text-left text-bold"},[e._v("Constraints")]),a("td",e._l(e.homekitItem.constraints,(function(t,s,i){return a("div",{key:i},[a("span",[e._v(e._s(e.constraintTypeNames[s])+": ")]),e._v(e._s(t)+"\n        ")])})),0)]):e._e()])])},Da=[];const ja={"Paired Read":["readable"],"Paired Write":["writable"],Notify:["supportsEventNotification","ble.supportsBroadcastNotification","ble.supportsDisconnectedNotification"],"Timed Write":["requiresTimedWrite"],Hidden:["hidden"],"Write Response":["ip.supportsWriteResponse"]},Ea=Object.entries(ja).reduce(((e,[t,a])=>(a.forEach((a=>e[a]=t)),e)),{});var Aa={namespaced:!0,props:{homekitItem:{type:Object}},data(){return{reverseCharacteristicPropertyMap:Ea,constraintTypeNames:{maxLength:"Maximum Length",minimumValue:"Minimum Value",maximumValue:"Maximum Value",stepValue:"Step Value",validValues:"Valid Values",validValuesRanges:"Valid Values Ranges"}}},computed:{showConstraints(){return void 0!=this.homekitItem.constraints&&Object.keys(this.homekitItem.constraints).length>0}},methods:{propertyDocName(e){if(e in this.reverseCharacteristicPropertyMap)return` (${this.reverseCharacteristicPropertyMap[e]})`}}},Ra=Aa,Ha=Object(q["a"])(Ra,Pa,Da,!1,null,null,null),Qa=Ha.exports;B()(Ha,"components",{QMarkupTable:Ot["a"]});var Ua={namespaced:!0,props:{homekitItem:{type:Object}},components:{AdkCharacteristicDataTable:Qa},data(){return{ICONS:o}},computed:{},watch:{},created(){},methods:{getServiceDescription(e){return Qe["a"].serviceDescriptionMap.get(e)},getCharacteristicDescription(e){return Qe["a"].characteristicDescriptionMap.get(e)}}},$a=Ua,Ba=(a("2290"),Object(q["a"])($a,Ma,Na,!1,null,null,null)),La=Ba.exports;B()(Ba,"components",{QCard:D["a"],QIcon:E["a"]});var Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"q-pa-sm q-gutter-sm"},[e._m(0),a("div",{staticClass:"q-ma-sm descriptionContainer",attrs:{"data-cy":"characteristic-description"},domProps:{innerHTML:e._s(e.getCharacteristicDescription(e.homekitItem.type))}}),e._m(1),a("div",{staticClass:"q-ma-sm row"},[a("AdkCharacteristicDataTable",{attrs:{"homekit-item":e.homekitItem}})],1)])])},Fa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-primary card-title"},[a("span",{staticClass:"adk-chapter-title"},[e._v("Description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-primary card-title"},[a("span",{staticClass:"adk-chapter-title",attrs:{"data-cy":"characteristics-parameters"}},[e._v("Parameters")])])}],za={namespaced:!0,props:{homekitItem:{type:Object}},components:{AdkCharacteristicDataTable:Qa},computed:{},watch:{},created(){},methods:{getCharacteristicDescription(e){return Qe["a"].characteristicDescriptionMap.get(e)}}},Ya=za,Ga=(a("3f52"),Object(q["a"])(Ya,Ka,Fa,!1,null,null,null)),Wa=Ga.exports,Za=a("7937");const{capitalize:Ja}=Za["b"];function Xa(e,t){return e.reduce(((e,a)=>{if(a.children){let s=Xa(a.children,t);if(s.length)return e.push(Object.assign(Object.create(Object.getPrototypeOf(a)),a)),e}return a.visibleName.toLowerCase().includes(t)&&e.push(a),e}),[])}function es(e,t){let a=e;return t&&(a=Xa(a,t.toLowerCase())),a}var ts={namespaced:!0,components:{DragTree:ne,HomekitTreeItem:me,AdkServiceDescription:La,AdkCharacteristicDescription:Wa},data(){return{HOMEKIT_TYPES:p["b"],ICONS:o,splitterModel:50,tab:p["b"].service,filterText:"",selected:null,info:"",groups:{[p["b"].accessory]:[{name:p["b"].accessory,pull:"clone",put:!1},{name:p["b"].service,pull:"clone",put:!1},{name:p["b"].characteristic,pull:"clone",put:!1}],[p["b"].service]:[{name:p["b"].service,pull:"clone",put:!1},{name:p["b"].characteristic,pull:"clone",put:!1}],[p["b"].characteristic]:[{name:p["b"].characteristic,pull:"clone",put:!1}]}}},computed:{...Object(c["mapGetters"])("Validation",["nextFreeIid"]),tabOptions(){let e=Object.keys(p["b"]);return e.shift(),e.map((e=>({value:e,label:e==p["b"].accessory?"Accessories":Ja(e)+"s"})))},adkTree(){return{[p["b"].accessory]:[],[p["b"].service]:es(Qe["a"].services,this.filterText),[p["b"].characteristic]:es(Qe["a"].characteristics,this.filterText)}}},watch:{},created(){this.sourceFilter=this.sources,this.selected=this.adkTree[this.tab][0]},methods:{...Object(c["mapActions"])("App",["addHomekitItem"]),addSigItem(e){this.generateIids(e);let t={homekitType:e.homekitType,homekitItem:e};ve["default"].debug("SIG Gatt item:"),ve["default"].debug(t,!0),this.addHomekitItem(t),this.$q.notify(m["Notifications"].qNotificationHtmlObj(m["Notifications"].notificationHtmlMsg(C(f(t)))))},clone(e){return this.generateIids(e),{homekitType:e.homekitType,homekitItem:e}},generateIids(e){let t=this.nextFreeIid;e.accept({visit(e){"0000003E-0000-1000-8000-0026BB765291"==e.type?e.iid=1:e.iid=t++}})}}},as=ts,ss=(a("7f95"),a("6a67")),is=a("27f9"),cs=a("4983"),rs=Object(q["a"])(as,Va,wa,!1,null,null,null),ns=rs.exports;B()(rs,"components",{QCard:D["a"],QBtnToggle:ss["a"],QSeparator:R["a"],QInput:is["a"],QIcon:E["a"],QScrollArea:cs["a"],QBtn:x["a"]});var ls=a("dbdd"),os=a("96b5"),ds=a.n(os),us=a("eca4");a("a1ac");let ps;var ms={props:{source:String},data:()=>({BUTTON_PROPS:l,HOMEKIT_TYPES:p["b"],mini:!1,platformHandler:ps}),computed:{...Object(c["mapGetters"])("App",["selectedItem","mergedAccessory","dialogOn","adkLayoutOn"]),...Object(c["mapGetters"])("Validation",["allValidation"]),...Object(c["mapGetters"])("GenerationResult",["generationFailed","generationResult","filename"]),...Object(c["mapGetters"])("App",["adkLayoutOn"]),...Object(c["mapGetters"])("VersionManager",["upgradeResults","showOlderVersionDialog","olderVersionDialogText"]),layout(){return this.selectedItem.homekitType}},components:{WaspMarkdown:ls["WaspMarkdown"],ButtonBar:K,HomekitTree:xe,AccessoryLayout:Fe,ServiceLayout:nt,CharacteristicLayout:ka,ActivePageTitle:Sa,AdkLayout:ns,GenerationResultDialog:ds.a,UpgradeRuleDialog:us["UpgradeRuleDialog"]},methods:{...Object(c["mapActions"])("App",["setSelectedItem","setAdkLayoutOn"]),...Object(c["mapActions"])("Markdown",["goToMarkdownId"]),...Object(c["mapActions"])("VersionManager",["setOlderVersionDialog"]),showGenerationResultDialog(){this.$refs["generation-result-dialog"].show()},onScroll(e){if(!this.adkLayoutOn&&!this.dialogOn){let t=se(e,this.selectedItem,this.mergedAccessory);null!=t&&this.setSelectedItem(t)}}},watch:{},created(){}},vs=ms,bs=a("4d5a"),hs=a("e359"),ys=a("068f"),gs=a("9404"),fs=a("09e3"),Cs=a("9989"),ks=Object(q["a"])(vs,s,i,!1,null,null,null);t["default"]=ks.exports;B()(ks,"components",{QLayout:bs["a"],QHeader:hs["a"],QImg:ys["a"],QSeparator:R["a"],QBtn:x["a"],QIcon:E["a"],QTooltip:N["a"],QDrawer:gs["a"],QScrollArea:cs["a"],QPageContainer:fs["a"],QPage:Cs["a"],QDialog:P["a"],QCard:D["a"],QCardSection:j["a"],QCardActions:A["a"]})},c2cb:function(e,t,a){},dc22:function(e,t,a){},ece4:function(e,t,a){}}]);